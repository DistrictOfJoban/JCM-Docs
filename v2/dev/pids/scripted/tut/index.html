
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://jcm.joban.org/v2/dev/pids/scripted/tut/">
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../../../scripting/">
      
      
      <link rel="icon" href="../../../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Building a Scripted PIDS Preset - Joban Client Mod</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        
        <link rel="stylesheet" href="../../../../assets/external/fonts.googleapis.com/css.49ea35f2.css">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../stylesheets/custom-color.css">
    
      <link rel="stylesheet" href="../../../../stylesheets/custom-layout.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#prerequisite" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="Joban Client Mod" class="md-header__button md-logo" aria-label="Joban Client Mod" data-md-component="logo">
      
  <img src="../../../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Joban Client Mod
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Building a Scripted PIDS Preset
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M9.598 1.591a.75.75 0 0 1 .785-.175 7.001 7.001 0 1 1-8.967 8.967.75.75 0 0 1 .961-.96 5.5 5.5 0 0 0 7.046-7.046.75.75 0 0 1 .175-.786m1.616 1.945a7 7 0 0 1-7.678 7.678 5.499 5.499 0 1 0 7.678-7.678"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M8 12a4 4 0 1 1 0-8 4 4 0 0 1 0 8m0-1.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5m5.657-8.157a.75.75 0 0 1 0 1.061l-1.061 1.06a.749.749 0 0 1-1.275-.326.75.75 0 0 1 .215-.734l1.06-1.06a.75.75 0 0 1 1.06 0Zm-9.193 9.193a.75.75 0 0 1 0 1.06l-1.06 1.061a.75.75 0 1 1-1.061-1.06l1.06-1.061a.75.75 0 0 1 1.061 0M8 0a.75.75 0 0 1 .75.75v1.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 8 0M3 8a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h1.5A.75.75 0 0 1 3 8m13 0a.75.75 0 0 1-.75.75h-1.5a.75.75 0 0 1 0-1.5h1.5A.75.75 0 0 1 16 8m-8 5a.75.75 0 0 1 .75.75v1.5a.75.75 0 0 1-1.5 0v-1.5A.75.75 0 0 1 8 13m3.536-1.464a.75.75 0 0 1 1.06 0l1.061 1.06a.75.75 0 0 1-1.06 1.061l-1.061-1.06a.75.75 0 0 1 0-1.061M2.343 2.343a.75.75 0 0 1 1.061 0l1.06 1.061a.75.75 0 0 1-.018 1.042.75.75 0 0 1-1.042.018l-1.06-1.06a.75.75 0 0 1 0-1.06Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/DistrictOfJoban/Joban-Client-Mod" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    Joban-Client-Mod
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../players/" class="md-tabs__link">
          
  
  
    
  
  For Players

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
  
  
    
    
      
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
    
  
  For Content Authors

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../contributing/introduction/" class="md-tabs__link">
          
  
  
    
  
  Contributing

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../nerds/neojcm/" class="md-tabs__link">
          
  
  
    
  
  For Nerds

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="Joban Client Mod" class="md-nav__button md-logo" aria-label="Joban Client Mod" data-md-component="logo">
      
  <img src="../../../../assets/logo.png" alt="logo">

    </a>
    Joban Client Mod
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/DistrictOfJoban/Joban-Client-Mod" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    Joban-Client-Mod
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    For Players
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            For Players
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../players/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Introduction
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/download/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Download & Install
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Features
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Features
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/features/jcm-pids/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    JCM PIDS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/features/tunnel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tunnel Wall (Rail Model)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/features/mod-integrations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mod Integrations
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../players/blocks/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Blocks
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Blocks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/auto_iron_door/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Automatic Iron Door
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/buffer_stop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Buffer Stop
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/butterfly_light/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Butterfly Light
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/ceiling_45/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ceiling (45°)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/circle_walls/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Circle Walls
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/departure_pole/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Departure Pole
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/departure_timer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Departure Timer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/drl_apgs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Disneyland Resorts Line APG
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/tcl_emg_stop_button/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Emergency stop button (TCL)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/tml_emg_stop_button/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Emergency stop button (TML)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/sil_emg_stop_button/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Emergency stop button (SIL)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/mtr_enquiry_machine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Enquiry Machine
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/rv_enquiry_machine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Railway Vision Enquiry Machine
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/mtr_enquiry_machine_wall/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Enquiry Machine (Wall-mounted)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/kcr_enquiry_machine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    KCR Enquiry Machine (Wall-mounted)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/exit_signs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Exit Signs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/fare_saver/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fare Saver
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/fire_alarm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fire Alarm
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/helpline_1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Help Line (With Sticker)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/helpline_2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Help Line
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/helpline_hkwk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Help Line (West Kowloon Station Type)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/helpline_standing_eal/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Help Line (East Rail Line Type)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/helpline_standing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Help Line (Standing)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/lrt_inter_car_barriers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LRT Inter-Car Barriers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/kcr_station_name_signs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    KCR Station Name Signs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/kcr_emg_stop_sign/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    KCR Emergency Stop Sign
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/light_lantern/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Light Lantern
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/spot_lamp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Spot Lamp
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/light_source_block/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Light Source Block
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/mtr_stairs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MTR Stairs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/operator_button/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Operator Button
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/pids_1a/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PIDS 1A
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/lcd_pids/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Old Tsueng Kwan O PIDS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/rv_pids/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Railway Vision PIDS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/rv_pids_sil_1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Railway Vision PIDS (SIL, Ocean Park/Wong Chuk Hang Station Variant)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/rv_pids_sil_2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Railway Vision PIDS (SIL, Admiralty/South Horizons Station Variant)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/rv_pids_pole/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Railway Vision PIDS Pole
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/pids_projector/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PIDS Projector
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/station_ceilings_wrl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Station Ceilings (2009)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/station_ceiling_wrl_poles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Station Ceiling Poles
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/station_name_standing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Standing Station Name Sign
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/static_signal_lights/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Static Signal Lights
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/inverted_signal_lights/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Inverted Signal Lights
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/sound_looper/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sound Looper
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/subsidy_machine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Subsidy Machine
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/train_model_e44/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    E44 Train Model
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/thales_ticket_barriers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Thales Ticket Barriers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/mtr_trespass_sign/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Trespass Signage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/kcr_trespass_sign/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Trespass Signage (KCR)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/lrt_trespass_sign/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LRT Trespass Signage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/blocks/water_machine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Water Machine
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../players/versions/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Version Archive
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Version Archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/versions/v1.2.2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    v1.2.2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/versions/v1.2.1-hotfix-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    v1.2.1-hotfix-1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/versions/v1.2.1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    v1.2.1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/versions/v1.2.0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    v1.2.0
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/versions/v1.1.9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    v1.1.9
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/versions/v1.1.8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    v1.1.8
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/versions/v1.1.7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    v1.1.7
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/versions/v1.1.6-hotfix-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    v1.1.6-hotfix-1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/versions/v1.1.6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    v1.1.6
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/versions/v1.1.5-hotfix-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    v1.1.5-hotfix-1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/versions/v1.1.5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    v1.1.5
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/versions/v1.1.4-hotfix-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    v1.1.4-hotfix-1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/versions/v1.1.4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    v1.1.4
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/versions/v1.1.3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    v1.1.3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/versions/v1.1.2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    v1.1.2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/versions/v1.1.1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    v1.1.1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/versions/v1.1.0a/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    v1.1.0a
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/versions/v1.1.0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    v1.1.0
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/versions/v1.0.9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    v1.0.9
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/versions/v1.0.8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    v1.0.8
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/versions/v1.0.7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    v1.0.7
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/versions/v1.0.6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    v1.0.6
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/versions/v1.0.5a/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    v1.0.5a
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/versions/v1.0.5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    v1.0.5
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/versions/v1.0.4a/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    v1.0.4a
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/versions/v1.0.4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    v1.0.4
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/versions/v1.0.3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    v1.0.3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/versions/v1.0.2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    v1.0.2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/versions/v1.0.1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    v1.0.1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../players/versions/v1.0.0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    v1.0.0
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    For Content Authors
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            For Content Authors
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    PIDS Preset
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            PIDS Preset
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../json_preset/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    JSON PIDS Preset
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Scripted PIDS Preset
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1_3" id="__nav_3_1_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_1_3">
            <span class="md-nav__icon md-icon"></span>
            Scripted PIDS Preset
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Building a Scripted PIDS Preset
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Building a Scripted PIDS Preset
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisite" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisite
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#note" class="md-nav__link">
    <span class="md-ellipsis">
      Note
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      Getting started
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Getting started">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#joban_custom_resourcesjson" class="md-nav__link">
    <span class="md-ellipsis">
      joban_custom_resources.json
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scriptspids_tutjs" class="md-nav__link">
    <span class="md-ellipsis">
      scripts/pids_tut.js
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hello-world" class="md-nav__link">
    <span class="md-ellipsis">
      Hello, World!
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#no-where-are-you-going" class="md-nav__link">
    <span class="md-ellipsis">
      No where are you going!
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rendering-arrivals" class="md-nav__link">
    <span class="md-ellipsis">
      Rendering Arrivals
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1-not-too-bad-after-all" class="md-nav__link">
    <span class="md-ellipsis">
      v1: Not too bad after-all!
    </span>
  </a>
  
    <nav class="md-nav" aria-label="v1: Not too bad after-all!">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stacking-order" class="md-nav__link">
    <span class="md-ellipsis">
      Stacking Order
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#estimated-arrival-time-text" class="md-nav__link">
    <span class="md-ellipsis">
      Estimated Arrival Time Text
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v2-light-rail-light-rail-everywhere" class="md-nav__link">
    <span class="md-ellipsis">
      v2: Light Rail, Light Rail Everywhere!
    </span>
  </a>
  
    <nav class="md-nav" aria-label="v2: Light Rail, Light Rail Everywhere!">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#drawing-the-light-rail-symbol" class="md-nav__link">
    <span class="md-ellipsis">
      Drawing the Light Rail Symbol
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v3-the-pids-called-they-wanted-their-header-bar-back" class="md-nav__link">
    <span class="md-ellipsis">
      v3: The PIDS called, they wanted their header bar back
    </span>
  </a>
  
    <nav class="md-nav" aria-label="v3: The PIDS called, they wanted their header bar back">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#weather-icon" class="md-nav__link">
    <span class="md-ellipsis">
      Weather Icon
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-a-clock" class="md-nav__link">
    <span class="md-ellipsis">
      Adding a clock
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v4-go-ham" class="md-nav__link">
    <span class="md-ellipsis">
      v4: Go ham!
    </span>
  </a>
  
    <nav class="md-nav" aria-label="v4: Go ham!">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#limiting-text-size" class="md-nav__link">
    <span class="md-ellipsis">
      Limiting text size
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v5-its-coming-together" class="md-nav__link">
    <span class="md-ellipsis">
      v5: It's coming together
    </span>
  </a>
  
    <nav class="md-nav" aria-label="v5: It&#39;s coming together">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#custom-message" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Message
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hide-platform-number" class="md-nav__link">
    <span class="md-ellipsis">
      Hide Platform Number
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hide-arrival" class="md-nav__link">
    <span class="md-ellipsis">
      Hide Arrival
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-to-do-next" class="md-nav__link">
    <span class="md-ellipsis">
      What to do next
    </span>
  </a>
  
    <nav class="md-nav" aria-label="What to do next">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#additional-challenges" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Challenges
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ending" class="md-nav__link">
    <span class="md-ellipsis">
      Ending
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../scripting/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Scripting
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Scripting
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../scripting/math/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Math Utilities
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../scripting/resources/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Resource Loading Method
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../scripting/utilities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utilities Method
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../scripting/dynamic_textures/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dynamic Textures
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../scripting/pids/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PIDS Scripting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://wiki.minecrafttransitrailway.com/mtr_addon:nte:js:eyecandy" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Eyecandy Scripting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../scripting/vehicle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Vehicle Scripting
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Contributing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../contributing/introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../contributing/translation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Translation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../contributing/documentation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Documentation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../contributing/project/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Making changes
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Making changes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../contributing/project/project_structure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Project Structure
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../contributing/project/code_guidelines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Code Guidelines
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../contributing/project/multiversion_development/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction to Multiversion
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    For Nerds
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            For Nerds
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../nerds/neojcm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NeoJCM
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisite" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisite
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#note" class="md-nav__link">
    <span class="md-ellipsis">
      Note
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      Getting started
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Getting started">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#joban_custom_resourcesjson" class="md-nav__link">
    <span class="md-ellipsis">
      joban_custom_resources.json
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scriptspids_tutjs" class="md-nav__link">
    <span class="md-ellipsis">
      scripts/pids_tut.js
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hello-world" class="md-nav__link">
    <span class="md-ellipsis">
      Hello, World!
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#no-where-are-you-going" class="md-nav__link">
    <span class="md-ellipsis">
      No where are you going!
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rendering-arrivals" class="md-nav__link">
    <span class="md-ellipsis">
      Rendering Arrivals
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1-not-too-bad-after-all" class="md-nav__link">
    <span class="md-ellipsis">
      v1: Not too bad after-all!
    </span>
  </a>
  
    <nav class="md-nav" aria-label="v1: Not too bad after-all!">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stacking-order" class="md-nav__link">
    <span class="md-ellipsis">
      Stacking Order
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#estimated-arrival-time-text" class="md-nav__link">
    <span class="md-ellipsis">
      Estimated Arrival Time Text
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v2-light-rail-light-rail-everywhere" class="md-nav__link">
    <span class="md-ellipsis">
      v2: Light Rail, Light Rail Everywhere!
    </span>
  </a>
  
    <nav class="md-nav" aria-label="v2: Light Rail, Light Rail Everywhere!">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#drawing-the-light-rail-symbol" class="md-nav__link">
    <span class="md-ellipsis">
      Drawing the Light Rail Symbol
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v3-the-pids-called-they-wanted-their-header-bar-back" class="md-nav__link">
    <span class="md-ellipsis">
      v3: The PIDS called, they wanted their header bar back
    </span>
  </a>
  
    <nav class="md-nav" aria-label="v3: The PIDS called, they wanted their header bar back">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#weather-icon" class="md-nav__link">
    <span class="md-ellipsis">
      Weather Icon
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-a-clock" class="md-nav__link">
    <span class="md-ellipsis">
      Adding a clock
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v4-go-ham" class="md-nav__link">
    <span class="md-ellipsis">
      v4: Go ham!
    </span>
  </a>
  
    <nav class="md-nav" aria-label="v4: Go ham!">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#limiting-text-size" class="md-nav__link">
    <span class="md-ellipsis">
      Limiting text size
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v5-its-coming-together" class="md-nav__link">
    <span class="md-ellipsis">
      v5: It's coming together
    </span>
  </a>
  
    <nav class="md-nav" aria-label="v5: It&#39;s coming together">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#custom-message" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Message
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hide-platform-number" class="md-nav__link">
    <span class="md-ellipsis">
      Hide Platform Number
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hide-arrival" class="md-nav__link">
    <span class="md-ellipsis">
      Hide Arrival
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-to-do-next" class="md-nav__link">
    <span class="md-ellipsis">
      What to do next
    </span>
  </a>
  
    <nav class="md-nav" aria-label="What to do next">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#additional-challenges" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Challenges
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ending" class="md-nav__link">
    <span class="md-ellipsis">
      Ending
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>Building a Scripted PIDS Preset</h1>

<p>This is a step-by-step tutorial on building a Scripted PIDS Preset using JavaScript.</p>
<p>By the end of the tutorial, you would have built a Fictional LRT (Light Rail) version of the MTR Railway Vision PIDS, which can adapt to Custom PIDS Messages and handling long string.</p>
<p><img alt="End result of our PIDS" src="img/JCM_JS_PIDS_Tutorial_Result.png" /></p>
<p><em>(Top: Default RV PIDS Preset, Bottom: Custom <abbr title="JavaScript">JS</abbr>-based PIDS Preset)</em></p>
<h2 id="prerequisite">Prerequisite<a class="headerlink" href="#prerequisite" title="Anchor link to this section for reference">#</a></h2>
<p>Before beginning this tutorial, you should setup a world with <abbr title="Minecraft Transit Railway 4.x">MTR 4</abbr> installed:</p>
<div class="admonition note inline end">
<p class="admonition-title">Note</p>
<p>A fully operational route is not required. If your route jams, the tutorial can still continue, as long as there's any train on the route.</p>
</div>
<ol>
<li>Create a route with 2 stations:<ol>
<li>1st station named <code>屯門碼頭|Tuen Mun Ferry Pier</code></li>
<li>2nd station named <code>田景|Tin King</code></li>
</ol>
</li>
<li>Name the route <code>輕鐵|Light Rail</code> with Route Number <code>507</code> and color code <code>00A650</code></li>
<li>Place a single PIDS within your view distance, which can display the arrivals of the routes</li>
<li>Create a siding, a depot, assign the route to the depot and configure the schedule so your vehicle departs.<ol>
<li>Setting your siding to allow unlimited vehicles is benefical for this tutorial as you would mostly be viewing upcoming schedules. Unlimited vehicles prevents situations where you would run out of vehicles for the PIDS to display.</li>
</ol>
</li>
</ol>
<h2 id="note">Note<a class="headerlink" href="#note" title="Anchor link to this section for reference">#</a></h2>
<p>Before starting, please note that:</p>
<ul>
<li>Repeated/Irrelevant code may be abbreviated with the <code>// ...</code> comment notation.</li>
<li>
<ul>
<li>Surrounding codes may be shown to ensure the readers don't get lost.</li>
</ul>
</li>
<li>Over the course of this tutorial, we may insert or change codes in our script. The affected lines are highlighted in this documentation, indicating such lines needs updating.</li>
<li>This article is best read with basic level of programming knowledge (Doesn't have to be JavaScript). You may still finish the tutorial without such knowledge, but may find some difficulty grasping some concept as this article is not meant to be a programming 101.</li>
<li>You don't have to finish the tutorial in one go :)</li>
</ul>
<h2 id="getting-started">Getting started<a class="headerlink" href="#getting-started" title="Anchor link to this section for reference">#</a></h2>
<p>To get started, <a href="../files/JCM_PIDS_Tutorial_Scripting_Pack.zip">download the tutorial resource pack here</a>, extract the zip and put it in Minecraft's Resource Pack folder.</p>
<p>This resource pack is specifically set-up for this tutorial, and therefore the <abbr title="JavaScript">JS</abbr> scripts inside are (mostly) empty. However we can still take a look at how a Scripted PIDS Preset is set-up.</p>
<h3 id="joban_custom_resourcesjson">joban_custom_resources.json<a class="headerlink" href="#joban_custom_resourcesjson" title="Anchor link to this section for reference">#</a></h3>
<p>The file will look like this:
<div class="language-json highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="p">{</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">  </span><span class="nt">&quot;pids_images&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pids_tut&quot;</span><span class="p">,</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DIY JS Preset&quot;</span><span class="p">,</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">      </span><span class="nt">&quot;scriptFiles&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;jsblock:scripts/pids_tut.js&quot;</span><span class="p">]</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">  </span><span class="p">]</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="p">}</span>
</span></code></pre></div></p>
<p>This is mostly the same from a JSON PIDS Preset, except the <code>scriptFiles</code> property which is a JSON array that points to the scripts used for this preset.</p>
<p>Multiple scripts can be used for the same preset as well. However to keep things simple, we are simply going to use 1 script to control the rendering: <code>scripts/pids_tut.js</code>.</p>
<h3 id="scriptspids_tutjs">scripts/pids_tut.js<a class="headerlink" href="#scriptspids_tutjs" title="Anchor link to this section for reference">#</a></h3>
<p>By opening up <strong>pids_tut.js</strong> in the <strong>scripts</strong> folder in a text editor (Notepad etc.), we can see the following script:</p>
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-1-10">10</a></span>
<span class="normal"><a href="#__codelineno-1-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">create</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">pids</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="w">  </span><span class="c1">// Your custom logic here...</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="p">}</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4"></a>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="kd">function</span><span class="w"> </span><span class="nx">render</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">pids</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="w">  </span><span class="c1">// Your custom logic here...</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="p">}</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8"></a>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="kd">function</span><span class="w"> </span><span class="nx">dispose</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">pids</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10"></a><span class="w">  </span><span class="c1">// Your custom logic here...</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>Our custom logic can be placed between each curly brackets for each of the function. As seen, there are a total of 3 functions: <code>create</code>, <code>render</code>, <code>dispose</code>.</p>
<ul>
<li>
<p>The <code>create</code> function is called when our PIDS enters the player's view. So this means that when a player switches the PIDS preset to our preset, or if a player is approaching a station with our PIDS in sight, everything within the curly bracket of the create function will be run.</p>
</li>
<li>
<p>The <code>render</code> function is called every frame (So 60fps = 60 times per second)<em>. Notice the asterisk? Because running scripts simply takes time, even if a short amount of time. JCM will </em>try to*, whenever possible, call your function every frame. However if there are too many scripts or your script is slow, then it may not be called every frame.</p>
</li>
<li>
<p>The <code>dispose</code> function is called when a PIDS Preset is switched away from, or the PIDS is no longer in sight for the player. This can be used to do clean-up work in complex PIDS that stores texture etc.</p>
</li>
</ul>
<p>The most useful one we are going to use is the <code>render</code> function, since this is where we can obtain up-to-date information and dynamically render our PIDS.</p>
<p>But let's not get ahead of ourselves, and instead start from something very simple: <em>A hello world script</em>.</p>
<h3 id="hello-world">Hello, World!<a class="headerlink" href="#hello-world" title="Anchor link to this section for reference">#</a></h3>
<ol>
<li>Open up <code>scripts/pids_tut.js</code> in your text editor (If you haven't already!)</li>
<li>Let's insert <code>print("Hello World ^^");</code> to the brackets within the <code>create</code> function.<ol>
<li>This calls the <code>print</code> function with the argument <code>"Hello World ^^"</code>. The <code>print</code> function will output the message in our Minecraft console.</li>
</ol>
</li>
<li>Insert <code>print("Goodbye World ^^;");</code> within the <code>dispose</code> function as well.</li>
</ol>
<p>After insertion, your script file should look something like this:</p>
<div class="language-js highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">pids_tut.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-2-10">10</a></span>
<span class="normal"><a href="#__codelineno-2-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">create</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">pids</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="hll"><span class="w">    </span><span class="nx">print</span><span class="p">(</span><span class="s2">&quot;Hello World ^^&quot;</span><span class="p">);</span>
</span></span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="p">}</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4"></a>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="kd">function</span><span class="w"> </span><span class="nx">render</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">pids</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="w">    </span><span class="c1">// Your custom logic here...</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="p">}</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8"></a>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="kd">function</span><span class="w"> </span><span class="nx">dispose</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">pids</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10"></a><span class="hll"><span class="w">    </span><span class="nx">print</span><span class="p">(</span><span class="s2">&quot;Goodbye World ^^;&quot;</span><span class="p">);</span>
</span></span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>After that, we can press the keybind <span class="keys"><kbd class="key-f3">F3</kbd><span>+</span><kbd class="key-t">T</kbd></span> in Minecraft to reload our resource pack.</p>
<p>Now look at your game console log, you should the following message:</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1">1</a></span>
<span class="normal"><a href="#__codelineno-3-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1"></a>[Scripting] Hello World ^^
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2"></a>[Scripting] Hello World ^^
</span></code></pre></div></td></tr></table></div>
<p>Notice how the message is printed 2 times? That's because PIDS in JCM (and <abbr title="Minecraft Transit Railway">MTR mod</abbr> for that matter) are constructed in a way where each side is drawn separately.</p>
<p>Therefore a normal PIDS would call the <code>create</code> function 2 times. This is normal behavior, you didn't do anything wrong!</p>
<p>Next, let's try going <em>very far</em> away from the PIDS, to the point where you can visually no longer sees them. You will then notice the following 2 messages shows up in the console:</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1">1</a></span>
<span class="normal"><a href="#__codelineno-4-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1"></a>[Scripting] Goodbye World ^^;
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2"></a>[Scripting] Goodbye World ^^;
</span></code></pre></div></td></tr></table></div>
<p>There you have it, a very simple Hello World script running in JCM.</p>
<p>So this concludes the Scripted PIDS tutorial, I hope that...</p>
<h3 id="no-where-are-you-going">No where are you going!<a class="headerlink" href="#no-where-are-you-going" title="Anchor link to this section for reference">#</a></h3>
<p>ok I am sorry :&lt;</p>
<p>Now let's actually draw the "Hello World" text onto the PIDS, <em>because printing to the game console isn't considered exciting for most players apparently</em>.</p>
<p>We can insert the following code to the <code>render</code> function to draw a text with the content <strong>Hello World</strong>:</p>
<div class="language-js highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">pids_tut.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-5">5</a></span>
<span class="normal"><a href="#__codelineno-5-6">6</a></span>
<span class="normal"><a href="#__codelineno-5-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="kd">function</span><span class="w"> </span><span class="nx">render</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">pids</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="hll"><span class="w">    </span><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">().</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;Hello World&quot;</span><span class="p">).</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span></span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>If this looks confusing, we can also split it line by line in the code:</p>
<div class="language-js highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">pids_tut.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-5">5</a></span>
<span class="normal"><a href="#__codelineno-6-6">6</a></span>
<span class="normal"><a href="#__codelineno-6-7">7</a></span>
<span class="normal"><a href="#__codelineno-6-8">8</a></span>
<span class="normal"><a href="#__codelineno-6-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="kd">function</span><span class="w"> </span><span class="nx">render</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">pids</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="hll"><span class="w">    </span><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">()</span>
</span></span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7"></a><span class="hll"><span class="w">    </span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;Hello World&quot;</span><span class="p">)</span>
</span></span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8"></a><span class="hll"><span class="w">    </span><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span></span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>Essentially this code:</p>
<ul>
<li>Creates a text object</li>
<li>Set its text content to <code>Hello World</code></li>
<li>Draw it to the game! (<code>ctx</code> is a provided parameter in the render function, more on that later)</li>
</ul>
<p>Note that even after splitting it line by line, it is still <em>valid code</em>! This is because a statement is only considered finish by ending it with a semicolon (<code>;</code>). In fact, it is recommended to split up the lines to maintain readability.</p>
<p>Anyway now let's save the file, reload with <span class="keys"><kbd class="key-f3">F3</kbd><span>+</span><kbd class="key-t">T</kbd></span> and see what happens!</p>
<p><img alt="PIDS with only a black screen" src="img/JCM_JS_PIDS_Tutorial_v0.1.png" /></p>
<p><small>*checks date* It's not April Fools yet is it?</small></p>
<p>ok ok our text actually <em>do</em> actually get rendered. The only problem is that the default text color is black. And as you might have figured out, <em>black-on-black may not necessarily be a very visible color combination.</em></p>
<p>So let's change our text to be rendered with the white color instead.</p>
<p>The hex color code for a solid white color is <code>FFFFFF</code>, so we can add the following line to our text:</p>
<p><code>.color(0xFFFFFF)</code> (<code>0x</code> is used to depict that the number is a hexadecimal number)</p>
<p>So our text block should look something like this:</p>
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-6">6</a></span>
<span class="normal"><a href="#__codelineno-7-7">7</a></span>
<span class="normal"><a href="#__codelineno-7-8">8</a></span>
<span class="normal"><a href="#__codelineno-7-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6"></a><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">()</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7"></a><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;Hello World&quot;</span><span class="p">)</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8"></a><span class="hll"><span class="p">.</span><span class="nx">color</span><span class="p">(</span><span class="mh">0xFFFFFF</span><span class="p">)</span>
</span></span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9"></a><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span></code></pre></div></td></tr></table></div>
<p><em><small>Note that <code>.draw()</code> is the final command and you cannot append anything afterwards, so any setting must be appended before <code>.draw()</code>.</small></em></p>
<p>Reload the resource pack again and we now see our text!</p>
<p><img alt="A white text in our PIDS saying &quot;Hello World&quot;" src="img/JCM_JS_PIDS_Tutorial_v0.2.png" /></p>
<p>With this logic, we can append a second Text block to render a 2nd text as well:</p>
<div class="language-js highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">pids_tut.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-8-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-8-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-8-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-8-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-8-10">10</a></span>
<span class="normal"><a href="#__codelineno-8-11">11</a></span>
<span class="normal"><a href="#__codelineno-8-12">12</a></span>
<span class="normal"><a href="#__codelineno-8-13">13</a></span>
<span class="normal"><a href="#__codelineno-8-14">14</a></span>
<span class="normal"><a href="#__codelineno-8-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="kd">function</span><span class="w"> </span><span class="nx">render</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">pids</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="w">    </span><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">()</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="w">    </span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;Hello World&quot;</span><span class="p">)</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="w">    </span><span class="p">.</span><span class="nx">color</span><span class="p">(</span><span class="mh">0xFFFFFF</span><span class="p">)</span>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9"></a><span class="w">    </span><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10"></a>
</span><span id="__span-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11"></a><span class="hll"><span class="w">    </span><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">()</span>
</span></span><span id="__span-8-12"><a id="__codelineno-8-12" name="__codelineno-8-12"></a><span class="hll"><span class="w">    </span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;Joban Client Mod v2!&quot;</span><span class="p">)</span>
</span></span><span id="__span-8-13"><a id="__codelineno-8-13" name="__codelineno-8-13"></a><span class="hll"><span class="w">    </span><span class="p">.</span><span class="nx">color</span><span class="p">(</span><span class="mh">0xFFFFFF</span><span class="p">)</span>
</span></span><span id="__span-8-14"><a id="__codelineno-8-14" name="__codelineno-8-14"></a><span class="hll"><span class="w">    </span><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span></span><span id="__span-8-15"><a id="__codelineno-8-15" name="__codelineno-8-15"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p><img alt="2 PIDS text overlapping" src="img/JCM_JS_PIDS_Tutorial_v0.3.png" /><br />
<small><em>I mean it technically did render twice...</em></small></p>
<p>But now they are overlapping and it's hard to see, let's move each of them apart.<br />
We can use the <code>.pos(x, y)</code> command to set the position of an element.</p>
<p>By default, a text have a height of <code>9</code>, so we can append <code>.pos(0, 9)</code> to set the text position to 9 unit downwards:</p>
<div class="language-js highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">pids_tut.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-9-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-9-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-9-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-9-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-9-10">10</a></span>
<span class="normal"><a href="#__codelineno-9-11">11</a></span>
<span class="normal"><a href="#__codelineno-9-12">12</a></span>
<span class="normal"><a href="#__codelineno-9-13">13</a></span>
<span class="normal"><a href="#__codelineno-9-14">14</a></span>
<span class="normal"><a href="#__codelineno-9-15">15</a></span>
<span class="normal"><a href="#__codelineno-9-16">16</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="kd">function</span><span class="w"> </span><span class="nx">render</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">pids</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="w">    </span><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">()</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="w">    </span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;Hello World&quot;</span><span class="p">)</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8"></a><span class="w">    </span><span class="p">.</span><span class="nx">color</span><span class="p">(</span><span class="mh">0xFFFFFF</span><span class="p">)</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9"></a><span class="w">    </span><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10"></a>
</span><span id="__span-9-11"><a id="__codelineno-9-11" name="__codelineno-9-11"></a><span class="w">    </span><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">()</span>
</span><span id="__span-9-12"><a id="__codelineno-9-12" name="__codelineno-9-12"></a><span class="w">    </span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;Joban Client Mod v2!&quot;</span><span class="p">)</span>
</span><span id="__span-9-13"><a id="__codelineno-9-13" name="__codelineno-9-13"></a><span class="w">    </span><span class="p">.</span><span class="nx">color</span><span class="p">(</span><span class="mh">0xFFFFFF</span><span class="p">)</span>
</span><span id="__span-9-14"><a id="__codelineno-9-14" name="__codelineno-9-14"></a><span class="hll"><span class="w">    </span><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">9</span><span class="p">)</span>
</span></span><span id="__span-9-15"><a id="__codelineno-9-15" name="__codelineno-9-15"></a><span class="w">    </span><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span><span id="__span-9-16"><a id="__codelineno-9-16" name="__codelineno-9-16"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<div class="admonition info inline end">
<p class="admonition-title">Does the text look a bit weird?</p>
<p>You may have noticed the <code>J</code> sticking out like a sore thumb, this is unfortunately due to Minecraft's imperfection when rendering TTF font.<br />
It will work fine if you switch to Minecraft font or with most other text combination</p>
</div>
<p><img alt="2 text in PIDS laid out vertically" src="img/JCM_JS_PIDS_Tutorial_v0.4.png" /></p>
<h3 id="rendering-arrivals">Rendering Arrivals<a class="headerlink" href="#rendering-arrivals" title="Anchor link to this section for reference">#</a></h3>
<p>During the tutorial, you might have noticed the <code>pids</code> object in the create/render/dispose function. This represents our PIDS object, where we can obtain arrivals and more from there.</p>
<p>We can get a list of arrivals with <code>pids.arrivals()</code>, and then obtain the n<sup>th</sup> arrival info with the <code>.get(n)</code> function.</p>
<p>So to obtain the first arrival entry, we can do so like this:</p>
<div class="language-js highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">pids_tut.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-5">5</a></span>
<span class="normal"><a href="#__codelineno-10-6">6</a></span>
<span class="normal"><a href="#__codelineno-10-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="kd">function</span><span class="w"> </span><span class="nx">render</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">pids</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="hll"><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">firstRowArrival</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">pids</span><span class="p">.</span><span class="nx">arrivals</span><span class="p">().</span><span class="nx">get</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>
</span></span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="w">    </span><span class="c1">// ... rest of your code</span>
</span></code></pre></div></td></tr></table></div>
<p>Remember, JavaScript is 0-based index. The first number starts from 0, then 1, and so on and so fourth...</p>
<p>Now that we have obtained our first arrival entry, we can obtain a variety of information with it, includeing it's route/LRT number, arrival and departure time, the route it's running and much more!</p>
<p>You may refer to the <a href="../../../scripting/pids/">PIDS Scripting Documentation</a> for more information, but we will also cover some of it in this tutorial.</p>
<p>At the moment we are only interested in getting the destination (Where the train is going). We can do that by calling the <code>destination()</code> function in our arrival entry:</p>
<div class="language-js highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">pids_tut.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-5">5</a></span>
<span class="normal"><a href="#__codelineno-11-6">6</a></span>
<span class="normal"><a href="#__codelineno-11-7">7</a></span>
<span class="normal"><a href="#__codelineno-11-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="kd">function</span><span class="w"> </span><span class="nx">render</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">pids</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">firstRowArrival</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">pids</span><span class="p">.</span><span class="nx">arrivals</span><span class="p">().</span><span class="nx">get</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7"></a><span class="hll"><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">firstRowDestination</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">firstRowArrival</span><span class="p">.</span><span class="nx">destination</span><span class="p">();</span><span class="w"> </span><span class="c1">// This is a string!</span>
</span></span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8"></a><span class="w">    </span><span class="c1">// ... rest of your code</span>
</span></code></pre></div></td></tr></table></div>
<p>And now we can replace our previous <code>Hello World</code> text content with <code>firstRowDestination</code>:</p>
<div class="language-js highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">pids_tut.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-12-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-12-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-12-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-12-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-12-10">10</a></span>
<span class="normal"><a href="#__codelineno-12-11">11</a></span>
<span class="normal"><a href="#__codelineno-12-12">12</a></span>
<span class="normal"><a href="#__codelineno-12-13">13</a></span>
<span class="normal"><a href="#__codelineno-12-14">14</a></span>
<span class="normal"><a href="#__codelineno-12-15">15</a></span>
<span class="normal"><a href="#__codelineno-12-16">16</a></span>
<span class="normal"><a href="#__codelineno-12-17">17</a></span>
<span class="normal"><a href="#__codelineno-12-18">18</a></span>
<span class="normal"><a href="#__codelineno-12-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5"></a><span class="kd">function</span><span class="w"> </span><span class="nx">render</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">pids</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">firstRowArrival</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">pids</span><span class="p">.</span><span class="nx">arrivals</span><span class="p">().</span><span class="nx">get</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">firstRowDestination</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">firstRowArrival</span><span class="p">.</span><span class="nx">destination</span><span class="p">();</span>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8"></a>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9"></a><span class="w">    </span><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">()</span>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10"></a><span class="hll"><span class="w">    </span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">firstRowDestination</span><span class="p">)</span>
</span></span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11"></a><span class="w">    </span><span class="p">.</span><span class="nx">color</span><span class="p">(</span><span class="mh">0xFFFFFF</span><span class="p">)</span>
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12"></a><span class="w">    </span><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span><span id="__span-12-13"><a id="__codelineno-12-13" name="__codelineno-12-13"></a>
</span><span id="__span-12-14"><a id="__codelineno-12-14" name="__codelineno-12-14"></a><span class="w">    </span><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">()</span>
</span><span id="__span-12-15"><a id="__codelineno-12-15" name="__codelineno-12-15"></a><span class="w">    </span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;Joban Client Mod v2!&quot;</span><span class="p">)</span>
</span><span id="__span-12-16"><a id="__codelineno-12-16" name="__codelineno-12-16"></a><span class="w">    </span><span class="p">.</span><span class="nx">color</span><span class="p">(</span><span class="mh">0xFFFFFF</span><span class="p">)</span>
</span><span id="__span-12-17"><a id="__codelineno-12-17" name="__codelineno-12-17"></a><span class="w">    </span><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">9</span><span class="p">)</span>
</span><span id="__span-12-18"><a id="__codelineno-12-18" name="__codelineno-12-18"></a><span class="w">    </span><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span><span id="__span-12-19"><a id="__codelineno-12-19" name="__codelineno-12-19"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p><img alt="A PIDS with 2 line. The first line showing our destination, and second line showing &quot;Joban Client Mod v2&quot;, our original text" src="img/JCM_JS_PIDS_Tutorial_v0.5.png" /></p>
<p>However before we continue, we now have a bit of road block developing:</p>
<ol>
<li>We are obtaining the first arrival here, but what if we don't have a first arrival? What if there's no train running? What if the client is still fetching the arrival infos?</li>
<li>Imagine a script filled with <code>Text.create()</code>, how would you be able to easily tell which text is which?</li>
</ol>
<p>Let's tackle the 2nd problem first. One way to do it is to add JavaScript comments with <code>//</code> or <code>/* */</code>. However JCM also reserved a slot for comment, and that is within the <code>Text.create(string)</code> function. So as an example, you can do the following:</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="hll"><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;1st row destination&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">// &lt;----</span>
</span></span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">firstRowDestination</span><span class="p">)</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="p">.</span><span class="nx">color</span><span class="p">(</span><span class="mh">0xFFFFFF</span><span class="p">)</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span></code></pre></div>
<p>The "<strong>1st row destination</strong>" text (in the above example) is purely cosmetic, and you can write any string within that. As such, this could be served as a slot for commenting. Whether this is preferable depends on your personal preferences.</p>
<p>Now back to the first problem, you may have already noticed some error popping up in your console log during some part of the tutorial. This is because we are trying to obtain a non-existent arrival.</p>
<p>For that, we can add a null check to ensure that the arrival exists first:</p>
<div class="language-js highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">pids_tut.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-14-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-14-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-14-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-14-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-14-10">10</a></span>
<span class="normal"><a href="#__codelineno-14-11">11</a></span>
<span class="normal"><a href="#__codelineno-14-12">12</a></span>
<span class="normal"><a href="#__codelineno-14-13">13</a></span>
<span class="normal"><a href="#__codelineno-14-14">14</a></span>
<span class="normal"><a href="#__codelineno-14-15">15</a></span>
<span class="normal"><a href="#__codelineno-14-16">16</a></span>
<span class="normal"><a href="#__codelineno-14-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="kd">function</span><span class="w"> </span><span class="nx">render</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">pids</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">firstRowArrival</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">pids</span><span class="p">.</span><span class="nx">arrivals</span><span class="p">().</span><span class="nx">get</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7"></a><span class="hll"><span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="nx">firstRowArrival</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// Check if arrival exists first</span>
</span></span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8"></a><span class="hll"><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">firstRowDestination</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">firstRowArrival</span><span class="p">.</span><span class="nx">destination</span><span class="p">();</span>
</span></span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9"></a>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10"></a><span class="w">        </span><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;1st row destination&quot;</span><span class="p">)</span>
</span><span id="__span-14-11"><a id="__codelineno-14-11" name="__codelineno-14-11"></a><span class="w">        </span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">firstRowDestination</span><span class="p">)</span>
</span><span id="__span-14-12"><a id="__codelineno-14-12" name="__codelineno-14-12"></a><span class="w">        </span><span class="p">.</span><span class="nx">color</span><span class="p">(</span><span class="mh">0xFFFFFF</span><span class="p">)</span>
</span><span id="__span-14-13"><a id="__codelineno-14-13" name="__codelineno-14-13"></a><span class="w">        </span><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span>
</span><span id="__span-14-14"><a id="__codelineno-14-14" name="__codelineno-14-14"></a><span class="w">        </span><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span><span id="__span-14-15"><a id="__codelineno-14-15" name="__codelineno-14-15"></a><span class="hll"><span class="w">    </span><span class="p">}</span>
</span></span><span id="__span-14-16"><a id="__codelineno-14-16" name="__codelineno-14-16"></a><span class="w">    </span><span class="c1">// ... rest of the text</span>
</span><span id="__span-14-17"><a id="__codelineno-14-17" name="__codelineno-14-17"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>Great! However while this might be fine for rendering 1 line of arrival, in practice we often have to display much more than that.<br />
While we could just copy and paste these codes, they are error-prune and a mess to modify.</p>
<p>Making matters more complicated, different PIDS Block have it's own number of arrival entry it supports.<br />
For example, <a href="../../../../players/blocks/rv_pids/">RV PIDS</a> supports 4 rows, while <a href="../../../../players/blocks/pids_1a/">PIDS 1A</a> only supports 3 rows.</p>
<p>One solution is to change this to a for-loop. We can use <code>pids.rows</code> to obtain how many rows the current PIDS block supports:</p>
<div class="language-js highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">pids_tut.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-15-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-15-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-15-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-15-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-15-10">10</a></span>
<span class="normal"><a href="#__codelineno-15-11">11</a></span>
<span class="normal"><a href="#__codelineno-15-12">12</a></span>
<span class="normal"><a href="#__codelineno-15-13">13</a></span>
<span class="normal"><a href="#__codelineno-15-14">14</a></span>
<span class="normal"><a href="#__codelineno-15-15">15</a></span>
<span class="normal"><a href="#__codelineno-15-16">16</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5"></a><span class="kd">function</span><span class="w"> </span><span class="nx">render</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">pids</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6"></a><span class="hll"><span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">pids</span><span class="p">.</span><span class="nx">rows</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// Set i to 0. i++ if i &lt; pids.rows, otherwise don&#39;t run this anymore</span>
</span></span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7"></a><span class="hll"><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">arrival</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">pids</span><span class="p">.</span><span class="nx">arrivals</span><span class="p">().</span><span class="nx">get</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span><span class="w"> </span><span class="c1">// &lt;---- Obtain nth row arrival</span>
</span></span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8"></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="nx">arrival</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9"></a><span class="w">            </span><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Arrival destination&quot;</span><span class="p">)</span>
</span><span id="__span-15-10"><a id="__codelineno-15-10" name="__codelineno-15-10"></a><span class="w">            </span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">arrival</span><span class="p">.</span><span class="nx">destination</span><span class="p">())</span>
</span><span id="__span-15-11"><a id="__codelineno-15-11" name="__codelineno-15-11"></a><span class="w">            </span><span class="p">.</span><span class="nx">color</span><span class="p">(</span><span class="mh">0xFFFFFF</span><span class="p">)</span>
</span><span id="__span-15-12"><a id="__codelineno-15-12" name="__codelineno-15-12"></a><span class="hll"><span class="w">            </span><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">i</span><span class="o">*</span><span class="mf">9</span><span class="p">)</span><span class="w"> </span><span class="c1">// &lt;--- nth row * text height</span>
</span></span><span id="__span-15-13"><a id="__codelineno-15-13" name="__codelineno-15-13"></a><span class="w">            </span><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span><span id="__span-15-14"><a id="__codelineno-15-14" name="__codelineno-15-14"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-15-15"><a id="__codelineno-15-15" name="__codelineno-15-15"></a><span class="hll"><span class="w">    </span><span class="p">}</span>
</span></span><span id="__span-15-16"><a id="__codelineno-15-16" name="__codelineno-15-16"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>The runs everything within the for loop for however many rows the pids has, setting the <code>i</code> variable to the n<sup>th</sup> time our code is executed.</p>
<p>As such, we can use <code>i</code> to determine our Y position as well as which arrival to obtain.</p>
<p><img alt="A PIDS with 4 rows of text, showing the destination station name for the 4 arrivals" src="img/JCM_JS_PIDS_Tutorial_v0.6.png" /></p>
<p>Of course, if your layout is not designed to be dynamic, and are designed for a specific PIDS, you can hardcode a number in (e.g. <code>4</code>) instead of <code>pids.rows</code>.</p>
<h4 id="text-size-language-cycle">Text size &amp; Language Cycle<a class="headerlink" href="#text-size-language-cycle" title="Anchor link to this section for reference">#</a></h4>
<p>To resize a text, we can use the <code>.scale(factor)</code> function to scale the text to be larger or smaller.</p>
<p>In our case, we will scale it by 1.25x:</p>
<div class="language-js highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">pids_tut.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-16-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-16-10">10</a></span>
<span class="normal"><a href="#__codelineno-16-11">11</a></span>
<span class="normal"><a href="#__codelineno-16-12">12</a></span>
<span class="normal"><a href="#__codelineno-16-13">13</a></span>
<span class="normal"><a href="#__codelineno-16-14">14</a></span>
<span class="normal"><a href="#__codelineno-16-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8"></a><span class="c1">/// ... code before</span>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9"></a><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Arrival destination&quot;</span><span class="p">)</span>
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10"></a><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">arrival</span><span class="p">.</span><span class="nx">destination</span><span class="p">())</span>
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11"></a><span class="p">.</span><span class="nx">color</span><span class="p">(</span><span class="mh">0xFFFFFF</span><span class="p">)</span>
</span><span id="__span-16-12"><a id="__codelineno-16-12" name="__codelineno-16-12"></a><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">i</span><span class="o">*</span><span class="mf">9</span><span class="p">)</span>
</span><span id="__span-16-13"><a id="__codelineno-16-13" name="__codelineno-16-13"></a><span class="hll"><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="mf">1.25</span><span class="p">)</span><span class="w"> </span><span class="c1">// Scale the text by 1.25x</span>
</span></span><span id="__span-16-14"><a id="__codelineno-16-14" name="__codelineno-16-14"></a><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span><span id="__span-16-15"><a id="__codelineno-16-15" name="__codelineno-16-15"></a><span class="c1">/// ... code after</span>
</span></code></pre></div></td></tr></table></div>
<p><img alt="A PIDS with 4 arrivals, the text are enlarged, but too close to each other" src="img/JCM_JS_PIDS_Tutorial_v0.7.png" /></p>
<p>The text does seems to be larger! But they are now too close to each other, and are really uncomfortable to look at.</p>
<p>This is because earlier, we set the position of the text to be <code>.pos(0, i*9)</code>. However since our text is scaled, the text height is no longer <code>9</code>, but instead <code>9 (text height) * 1.25 (our scale)</code> = 11.25.</p>
<p>While we could just change it to <code>11.25</code>, let's leave even more padding between each row for a better-look.<br />
Let's say each row should go <strong>16.75</strong> unit downwards:</p>
<div class="language-js highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">pids_tut.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-17-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-17-10">10</a></span>
<span class="normal"><a href="#__codelineno-17-11">11</a></span>
<span class="normal"><a href="#__codelineno-17-12">12</a></span>
<span class="normal"><a href="#__codelineno-17-13">13</a></span>
<span class="normal"><a href="#__codelineno-17-14">14</a></span>
<span class="normal"><a href="#__codelineno-17-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-17-8"><a id="__codelineno-17-8" name="__codelineno-17-8"></a><span class="c1">/// ... code before</span>
</span><span id="__span-17-9"><a id="__codelineno-17-9" name="__codelineno-17-9"></a><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Arrival destination&quot;</span><span class="p">)</span>
</span><span id="__span-17-10"><a id="__codelineno-17-10" name="__codelineno-17-10"></a><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">arrival</span><span class="p">.</span><span class="nx">destination</span><span class="p">())</span>
</span><span id="__span-17-11"><a id="__codelineno-17-11" name="__codelineno-17-11"></a><span class="p">.</span><span class="nx">color</span><span class="p">(</span><span class="mh">0xFFFFFF</span><span class="p">)</span>
</span><span id="__span-17-12"><a id="__codelineno-17-12" name="__codelineno-17-12"></a><span class="hll"><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">i</span><span class="o">*</span><span class="mf">16.75</span><span class="p">)</span>
</span></span><span id="__span-17-13"><a id="__codelineno-17-13" name="__codelineno-17-13"></a><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="mf">1.25</span><span class="p">)</span>
</span><span id="__span-17-14"><a id="__codelineno-17-14" name="__codelineno-17-14"></a><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span><span id="__span-17-15"><a id="__codelineno-17-15" name="__codelineno-17-15"></a><span class="c1">/// ... code after</span>
</span></code></pre></div></td></tr></table></div>
<p><img alt="A PIDS with 4 arrivals, text are now spaced correctly" src="img/JCM_JS_PIDS_Tutorial_v0.8.png" /></p>
<p>Much better! The last thing we have to deal with is handling different languages. Currently it's just displayed with everything including the pipe character, which is used by the <abbr title="Minecraft Transit Railway">MTR mod</abbr> as a way to split languages apart.</p>
<p>To cycle the string, we can wrap our destination string with the <code>TextUtil.cycleString(str)</code> function.</p>
<p><code>TextUtil</code> is a utility method provided our of the box for us, you can check the <a href="../../../scripting/utilities/">Utilities</a> page for more helper functions like these.</p>
<div class="language-js highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">pids_tut.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-18-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-18-10">10</a></span>
<span class="normal"><a href="#__codelineno-18-11">11</a></span>
<span class="normal"><a href="#__codelineno-18-12">12</a></span>
<span class="normal"><a href="#__codelineno-18-13">13</a></span>
<span class="normal"><a href="#__codelineno-18-14">14</a></span>
<span class="normal"><a href="#__codelineno-18-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8"></a><span class="c1">/// ... code before</span>
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9"></a><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Arrival destination&quot;</span><span class="p">)</span>
</span><span id="__span-18-10"><a id="__codelineno-18-10" name="__codelineno-18-10"></a><span class="hll"><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">TextUtil</span><span class="p">.</span><span class="nx">cycleString</span><span class="p">(</span><span class="nx">arrival</span><span class="p">.</span><span class="nx">destination</span><span class="p">()))</span>
</span></span><span id="__span-18-11"><a id="__codelineno-18-11" name="__codelineno-18-11"></a><span class="p">.</span><span class="nx">color</span><span class="p">(</span><span class="mh">0xFFFFFF</span><span class="p">)</span>
</span><span id="__span-18-12"><a id="__codelineno-18-12" name="__codelineno-18-12"></a><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">i</span><span class="o">*</span><span class="mf">16.75</span><span class="p">)</span>
</span><span id="__span-18-13"><a id="__codelineno-18-13" name="__codelineno-18-13"></a><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="mf">1.25</span><span class="p">)</span>
</span><span id="__span-18-14"><a id="__codelineno-18-14" name="__codelineno-18-14"></a><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span><span id="__span-18-15"><a id="__codelineno-18-15" name="__codelineno-18-15"></a><span class="c1">/// ... code after</span>
</span></code></pre></div></td></tr></table></div>
<p>And there we go, now the text cycles!</p>
<p><img alt="A PIDS with 4 arrivals, showing the chinese destination for each arrival" src="img/JCM_JS_PIDS_Tutorial_v0.9.png" /></p>
<p><img alt="A PIDS with 4 arrivals, showing the english destination for each arrival" src="img/JCM_JS_PIDS_Tutorial_v0.10.png" /></p>
<p>So to re-cap, our code should look <em>similar</em> to this:</p>
<div class="language-js highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">pids_tut.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-19-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-19-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-19-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-19-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-19-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-19-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-19-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-19-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-19-10">10</a></span>
<span class="normal"><a href="#__codelineno-19-11">11</a></span>
<span class="normal"><a href="#__codelineno-19-12">12</a></span>
<span class="normal"><a href="#__codelineno-19-13">13</a></span>
<span class="normal"><a href="#__codelineno-19-14">14</a></span>
<span class="normal"><a href="#__codelineno-19-15">15</a></span>
<span class="normal"><a href="#__codelineno-19-16">16</a></span>
<span class="normal"><a href="#__codelineno-19-17">17</a></span>
<span class="normal"><a href="#__codelineno-19-18">18</a></span>
<span class="normal"><a href="#__codelineno-19-19">19</a></span>
<span class="normal"><a href="#__codelineno-19-20">20</a></span>
<span class="normal"><a href="#__codelineno-19-21">21</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">create</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">pids</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="w">    </span><span class="nx">print</span><span class="p">(</span><span class="s2">&quot;Hello World ^^&quot;</span><span class="p">);</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3"></a><span class="p">}</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4"></a>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5"></a><span class="kd">function</span><span class="w"> </span><span class="nx">render</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">pids</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6"></a><span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">pids</span><span class="p">.</span><span class="nx">rows</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7"></a><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">arrival</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">pids</span><span class="p">.</span><span class="nx">arrivals</span><span class="p">().</span><span class="nx">get</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
</span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8"></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="nx">arrival</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-9"><a id="__codelineno-19-9" name="__codelineno-19-9"></a><span class="w">            </span><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Arrival destination&quot;</span><span class="p">)</span>
</span><span id="__span-19-10"><a id="__codelineno-19-10" name="__codelineno-19-10"></a><span class="w">            </span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">TextUtil</span><span class="p">.</span><span class="nx">cycleString</span><span class="p">(</span><span class="nx">arrival</span><span class="p">.</span><span class="nx">destination</span><span class="p">()))</span>
</span><span id="__span-19-11"><a id="__codelineno-19-11" name="__codelineno-19-11"></a><span class="w">            </span><span class="p">.</span><span class="nx">color</span><span class="p">(</span><span class="mh">0xFFFFFF</span><span class="p">)</span>
</span><span id="__span-19-12"><a id="__codelineno-19-12" name="__codelineno-19-12"></a><span class="w">            </span><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">i</span><span class="o">*</span><span class="mf">16.75</span><span class="p">)</span>
</span><span id="__span-19-13"><a id="__codelineno-19-13" name="__codelineno-19-13"></a><span class="w">            </span><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="mf">1.25</span><span class="p">)</span>
</span><span id="__span-19-14"><a id="__codelineno-19-14" name="__codelineno-19-14"></a><span class="w">            </span><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span><span id="__span-19-15"><a id="__codelineno-19-15" name="__codelineno-19-15"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-19-16"><a id="__codelineno-19-16" name="__codelineno-19-16"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-19-17"><a id="__codelineno-19-17" name="__codelineno-19-17"></a><span class="p">}</span>
</span><span id="__span-19-18"><a id="__codelineno-19-18" name="__codelineno-19-18"></a>
</span><span id="__span-19-19"><a id="__codelineno-19-19" name="__codelineno-19-19"></a><span class="kd">function</span><span class="w"> </span><span class="nx">dispose</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">pids</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-20"><a id="__codelineno-19-20" name="__codelineno-19-20"></a><span class="w">    </span><span class="nx">print</span><span class="p">(</span><span class="s2">&quot;Goodbye World ^^;&quot;</span><span class="p">);</span>
</span><span id="__span-19-21"><a id="__codelineno-19-21" name="__codelineno-19-21"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<h2 id="v1-not-too-bad-after-all">v1: Not too bad after-all!<a class="headerlink" href="#v1-not-too-bad-after-all" title="Anchor link to this section for reference">#</a></h2>
<p>In the last section we've spent all that time rendering some black-on-white text, but still it doesn't really look good.</p>
<p>The next thing we are going to do is to draw a background alongside the PIDS text. This is very similar to the way we make text, but we use <code>Texture</code> instead, as well as the <code>.texture(id)</code> function to specify the image we would draw:</p>
<div class="language-js highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">pids_tut.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-20-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-20-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-20-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-20-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-20-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-20-10">10</a></span>
<span class="normal"><a href="#__codelineno-20-11">11</a></span>
<span class="normal"><a href="#__codelineno-20-12">12</a></span>
<span class="normal"><a href="#__codelineno-20-13">13</a></span>
<span class="normal"><a href="#__codelineno-20-14">14</a></span>
<span class="normal"><a href="#__codelineno-20-15">15</a></span>
<span class="normal"><a href="#__codelineno-20-16">16</a></span>
<span class="normal"><a href="#__codelineno-20-17">17</a></span>
<span class="normal"><a href="#__codelineno-20-18">18</a></span>
<span class="normal"><a href="#__codelineno-20-19">19</a></span>
<span class="normal"><a href="#__codelineno-20-20">20</a></span>
<span class="normal"><a href="#__codelineno-20-21">21</a></span>
<span class="normal"><a href="#__codelineno-20-22">22</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4"></a><span class="c1">/// ... code before</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5"></a><span class="kd">function</span><span class="w"> </span><span class="nx">render</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">pids</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6"></a><span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">pids</span><span class="p">.</span><span class="nx">rows</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7"></a><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">arrival</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">pids</span><span class="p">.</span><span class="nx">arrivals</span><span class="p">().</span><span class="nx">get</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8"></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="nx">arrival</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-9"><a id="__codelineno-20-9" name="__codelineno-20-9"></a><span class="w">            </span><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Arrival destination&quot;</span><span class="p">)</span>
</span><span id="__span-20-10"><a id="__codelineno-20-10" name="__codelineno-20-10"></a><span class="w">            </span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">TextUtil</span><span class="p">.</span><span class="nx">cycleString</span><span class="p">(</span><span class="nx">arrival</span><span class="p">.</span><span class="nx">destination</span><span class="p">()))</span>
</span><span id="__span-20-11"><a id="__codelineno-20-11" name="__codelineno-20-11"></a><span class="w">            </span><span class="p">.</span><span class="nx">color</span><span class="p">(</span><span class="mh">0xFFFFFF</span><span class="p">)</span>
</span><span id="__span-20-12"><a id="__codelineno-20-12" name="__codelineno-20-12"></a><span class="w">            </span><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">i</span><span class="o">*</span><span class="mf">16.75</span><span class="p">)</span>
</span><span id="__span-20-13"><a id="__codelineno-20-13" name="__codelineno-20-13"></a><span class="w">            </span><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="mf">1.25</span><span class="p">)</span>
</span><span id="__span-20-14"><a id="__codelineno-20-14" name="__codelineno-20-14"></a><span class="w">            </span><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span><span id="__span-20-15"><a id="__codelineno-20-15" name="__codelineno-20-15"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-20-16"><a id="__codelineno-20-16" name="__codelineno-20-16"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-20-17"><a id="__codelineno-20-17" name="__codelineno-20-17"></a>
</span><span id="__span-20-18"><a id="__codelineno-20-18" name="__codelineno-20-18"></a><span class="hll"><span class="w">    </span><span class="nx">Texture</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Background&quot;</span><span class="p">)</span>
</span></span><span id="__span-20-19"><a id="__codelineno-20-19" name="__codelineno-20-19"></a><span class="hll"><span class="w">    </span><span class="p">.</span><span class="nx">texture</span><span class="p">(</span><span class="s2">&quot;jsblock:textures/block/pids/rv_default.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">// (1)!</span>
</span></span><span id="__span-20-20"><a id="__codelineno-20-20" name="__codelineno-20-20"></a><span class="hll"><span class="w">    </span><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span></span><span id="__span-20-21"><a id="__codelineno-20-21" name="__codelineno-20-21"></a><span class="p">}</span>
</span><span id="__span-20-22"><a id="__codelineno-20-22" name="__codelineno-20-22"></a><span class="c1">/// ... code after</span>
</span></code></pre></div></td></tr></table></div>
<ol>
<li><code>jsblock:textures/block/pids/rv_default.png</code> is the default image used for the built-in Railway Vision PIDS that comes with JCM.<br>Of course, you are welcomed to bring your own images as well!</li>
</ol>
<p>Now reload the resource pack and...</p>
<p><img alt="The 4 arrivals PIDS, with the specified PIDS image at the front on the top left corner" src="img/JCM_JS_PIDS_Tutorial_v1.0.png" /></p>
<p>On the surface it seems that the only thing wrong is the positioning &amp; sizing (Which to be fair, we didn't tell JCM the size, so it uses the default). However another problem is that the image is appearing <em>over</em> the text, which is not what you want for a <em>background</em> image.</p>
<h3 id="stacking-order">Stacking Order<a class="headerlink" href="#stacking-order" title="Anchor link to this section for reference">#</a></h3>
<p>In JCM, every elements that gets drawn are rendered with their z-position incremented ever so slightly.</p>
<p>Therefore, the 2nd element to be drawn is placed <em>in-front</em> of the 1st element.</p>
<p>So the rule is pretty simple: Whoever gets rendered <strong>later</strong> are put <strong>in-front</strong>, and whoever gets rendered <strong>earlier</strong> are <strong>behind</strong> the one who are rendered later.</p>
<p>With this logic, let's move our background image to the <strong>top</strong> of the render function, so that everything afterwards are drawn on in-front of the background.</p>
<div class="language-js highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">pids_tut.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-21-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-21-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-21-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-21-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-21-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-21-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-21-10">10</a></span>
<span class="normal"><a href="#__codelineno-21-11">11</a></span>
<span class="normal"><a href="#__codelineno-21-12">12</a></span>
<span class="normal"><a href="#__codelineno-21-13">13</a></span>
<span class="normal"><a href="#__codelineno-21-14">14</a></span>
<span class="normal"><a href="#__codelineno-21-15">15</a></span>
<span class="normal"><a href="#__codelineno-21-16">16</a></span>
<span class="normal"><a href="#__codelineno-21-17">17</a></span>
<span class="normal"><a href="#__codelineno-21-18">18</a></span>
<span class="normal"><a href="#__codelineno-21-19">19</a></span>
<span class="normal"><a href="#__codelineno-21-20">20</a></span>
<span class="normal"><a href="#__codelineno-21-21">21</a></span>
<span class="normal"><a href="#__codelineno-21-22">22</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4"></a><span class="c1">/// ... code before</span>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5"></a><span class="kd">function</span><span class="w"> </span><span class="nx">render</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">pids</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6"></a><span class="hll"><span class="w">    </span><span class="nx">Texture</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Background&quot;</span><span class="p">)</span>
</span></span><span id="__span-21-7"><a id="__codelineno-21-7" name="__codelineno-21-7"></a><span class="hll"><span class="w">    </span><span class="p">.</span><span class="nx">texture</span><span class="p">(</span><span class="s2">&quot;jsblock:textures/block/pids/rv_default.png&quot;</span><span class="p">)</span>
</span></span><span id="__span-21-8"><a id="__codelineno-21-8" name="__codelineno-21-8"></a><span class="hll"><span class="w">    </span><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span></span><span id="__span-21-9"><a id="__codelineno-21-9" name="__codelineno-21-9"></a>
</span><span id="__span-21-10"><a id="__codelineno-21-10" name="__codelineno-21-10"></a><span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">4</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-21-11"><a id="__codelineno-21-11" name="__codelineno-21-11"></a><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">arrival</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">pids</span><span class="p">.</span><span class="nx">arrivals</span><span class="p">().</span><span class="nx">get</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
</span><span id="__span-21-12"><a id="__codelineno-21-12" name="__codelineno-21-12"></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="nx">arrival</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-21-13"><a id="__codelineno-21-13" name="__codelineno-21-13"></a><span class="w">            </span><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Arrival destination&quot;</span><span class="p">)</span>
</span><span id="__span-21-14"><a id="__codelineno-21-14" name="__codelineno-21-14"></a><span class="w">            </span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">TextUtil</span><span class="p">.</span><span class="nx">cycleString</span><span class="p">(</span><span class="nx">arrival</span><span class="p">.</span><span class="nx">destination</span><span class="p">()))</span>
</span><span id="__span-21-15"><a id="__codelineno-21-15" name="__codelineno-21-15"></a><span class="w">            </span><span class="p">.</span><span class="nx">color</span><span class="p">(</span><span class="mh">0xFFFFFF</span><span class="p">)</span>
</span><span id="__span-21-16"><a id="__codelineno-21-16" name="__codelineno-21-16"></a><span class="w">            </span><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">i</span><span class="o">*</span><span class="mf">16.75</span><span class="p">)</span>
</span><span id="__span-21-17"><a id="__codelineno-21-17" name="__codelineno-21-17"></a><span class="w">            </span><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="mf">1.25</span><span class="p">)</span>
</span><span id="__span-21-18"><a id="__codelineno-21-18" name="__codelineno-21-18"></a><span class="w">            </span><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span><span id="__span-21-19"><a id="__codelineno-21-19" name="__codelineno-21-19"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-21-20"><a id="__codelineno-21-20" name="__codelineno-21-20"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-21-21"><a id="__codelineno-21-21" name="__codelineno-21-21"></a><span class="p">}</span>
</span><span id="__span-21-22"><a id="__codelineno-21-22" name="__codelineno-21-22"></a><span class="c1">/// ... code after</span>
</span></code></pre></div></td></tr></table></div>
<p><img alt="The image now renders behind the text" src="img/JCM_JS_PIDS_Tutorial_v1.1.png" /></p>
<p>Now we just need to resize the texture to stretch it through the entire screen.</p>
<p>This can be done through the <code>.size(width, height)</code> function:</p>
<div class="language-js highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">pids_tut.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-22-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-22-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-22-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-22-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-22-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5"></a><span class="c1">/// ... code before</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6"></a><span class="nx">Texture</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Background&quot;</span><span class="p">)</span>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7"></a><span class="p">.</span><span class="nx">texture</span><span class="p">(</span><span class="s2">&quot;jsblock:textures/block/pids/rv_default.png&quot;</span><span class="p">)</span>
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8"></a><span class="hll"><span class="p">.</span><span class="nx">size</span><span class="p">(</span><span class="mf">80</span><span class="p">,</span><span class="w"> </span><span class="mf">80</span><span class="p">)</span>
</span></span><span id="__span-22-9"><a id="__codelineno-22-9" name="__codelineno-22-9"></a><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span><span id="__span-22-10"><a id="__codelineno-22-10" name="__codelineno-22-10"></a><span class="c1">/// ... code after</span>
</span></code></pre></div></td></tr></table></div>
<p>Hmm <code>80, 80</code>? That's a square, not a rectangle like our PIDS screen?</p>
<p>That's correct, this code indeed does not cover the entire screen. A Railway Vision PIDS uses the size 136w x 76h.</p>
<p>While we could just change the size to <code>136, 76</code>, we can also obtain the size of the PIDS directly with the <code>pids</code> variable passed to our render function, specifically <code>pids.width</code> and <code>pids.height</code>:</p>
<div class="language-js highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">pids_tut.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-23-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-23-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-23-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-23-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-23-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-23-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5"></a><span class="c1">/// ... code before</span>
</span><span id="__span-23-6"><a id="__codelineno-23-6" name="__codelineno-23-6"></a><span class="nx">Texture</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Background&quot;</span><span class="p">)</span>
</span><span id="__span-23-7"><a id="__codelineno-23-7" name="__codelineno-23-7"></a><span class="p">.</span><span class="nx">texture</span><span class="p">(</span><span class="s2">&quot;jsblock:textures/block/pids/rv_default.png&quot;</span><span class="p">)</span>
</span><span id="__span-23-8"><a id="__codelineno-23-8" name="__codelineno-23-8"></a><span class="hll"><span class="p">.</span><span class="nx">size</span><span class="p">(</span><span class="nx">pids</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span><span class="w"> </span><span class="nx">pids</span><span class="p">.</span><span class="nx">height</span><span class="p">)</span>
</span></span><span id="__span-23-9"><a id="__codelineno-23-9" name="__codelineno-23-9"></a><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span><span id="__span-23-10"><a id="__codelineno-23-10" name="__codelineno-23-10"></a><span class="c1">/// ... code before</span>
</span></code></pre></div></td></tr></table></div>
<p>This is useful both for readability purposes, as well as factoring in different sizes of PIDS. (An LCD PIDS screen is slightly smaller at 133w x 72h)</p>
<p>And let's not forget setting our destination text color to black (<code>0x000000</code>, or just remove <code>.color</code> entirely as it's black by default anyway), as the background is now bright.</p>
<p><img alt="A PIDS with the RV PIDS background and 4 arrival text, however they are incorrectly positioned." src="img/JCM_JS_PIDS_Tutorial_v1.2.png" /></p>
<p>The background image itself appears to include a header bar, which our arrival text has not accounted for.</p>
<p>A very straight forward fix is to just offset the text's Y position. To save you time, I have tested the value for you, and it is <code>13</code> is the sweet spot :)</p>
<div class="language-js highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">pids_tut.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-24-13">13</a></span>
<span class="normal"><a href="#__codelineno-24-14">14</a></span>
<span class="normal"><a href="#__codelineno-24-15">15</a></span>
<span class="normal"><a href="#__codelineno-24-16">16</a></span>
<span class="normal"><a href="#__codelineno-24-17">17</a></span>
<span class="normal"><a href="#__codelineno-24-18">18</a></span>
<span class="normal"><a href="#__codelineno-24-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-24-13"><a id="__codelineno-24-13" name="__codelineno-24-13"></a><span class="c1">/// ... code before</span>
</span><span id="__span-24-14"><a id="__codelineno-24-14" name="__codelineno-24-14"></a><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Arrival destination&quot;</span><span class="p">)</span>
</span><span id="__span-24-15"><a id="__codelineno-24-15" name="__codelineno-24-15"></a><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">TextUtil</span><span class="p">.</span><span class="nx">cycleString</span><span class="p">(</span><span class="nx">arrival</span><span class="p">.</span><span class="nx">destination</span><span class="p">()))</span>
</span><span id="__span-24-16"><a id="__codelineno-24-16" name="__codelineno-24-16"></a><span class="hll"><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">13</span><span class="o">+</span><span class="p">(</span><span class="nx">i</span><span class="o">*</span><span class="mf">16.75</span><span class="p">))</span>
</span></span><span id="__span-24-17"><a id="__codelineno-24-17" name="__codelineno-24-17"></a><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="mf">1.25</span><span class="p">)</span>
</span><span id="__span-24-18"><a id="__codelineno-24-18" name="__codelineno-24-18"></a><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span><span id="__span-24-19"><a id="__codelineno-24-19" name="__codelineno-24-19"></a><span class="c1">/// ... code before</span>
</span></code></pre></div></td></tr></table></div>
<p>Ok now things are getting crazy. Imagine if you give this to a friend for a reference, or even just you reading this a year later. Could you tell what that <code>13</code> is for, and why <code>i*16.75</code>?</p>
<p>In such case, we should declare a variable to give our value a name:</p>
<div class="language-js highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">pids_tut.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-25-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-25-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-25-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-25-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-25-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-25-10">10</a></span>
<span class="normal"><a href="#__codelineno-25-11">11</a></span>
<span class="normal"><a href="#__codelineno-25-12">12</a></span>
<span class="normal"><a href="#__codelineno-25-13">13</a></span>
<span class="normal"><a href="#__codelineno-25-14">14</a></span>
<span class="normal"><a href="#__codelineno-25-15">15</a></span>
<span class="normal"><a href="#__codelineno-25-16">16</a></span>
<span class="normal"><a href="#__codelineno-25-17">17</a></span>
<span class="normal"><a href="#__codelineno-25-18">18</a></span>
<span class="normal"><a href="#__codelineno-25-19">19</a></span>
<span class="normal"><a href="#__codelineno-25-20">20</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5"></a><span class="kd">function</span><span class="w"> </span><span class="nx">render</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">pids</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6"></a><span class="w">    </span><span class="c1">// ...background</span>
</span><span id="__span-25-7"><a id="__codelineno-25-7" name="__codelineno-25-7"></a>
</span><span id="__span-25-8"><a id="__codelineno-25-8" name="__codelineno-25-8"></a><span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">4</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-9"><a id="__codelineno-25-9" name="__codelineno-25-9"></a><span class="hll"><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">rowY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">13</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="nx">i</span><span class="o">*</span><span class="mf">16.75</span><span class="p">);</span>
</span></span><span id="__span-25-10"><a id="__codelineno-25-10" name="__codelineno-25-10"></a>
</span><span id="__span-25-11"><a id="__codelineno-25-11" name="__codelineno-25-11"></a><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">arrival</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">pids</span><span class="p">.</span><span class="nx">arrivals</span><span class="p">().</span><span class="nx">get</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
</span><span id="__span-25-12"><a id="__codelineno-25-12" name="__codelineno-25-12"></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="nx">arrival</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-13"><a id="__codelineno-25-13" name="__codelineno-25-13"></a><span class="w">            </span><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Arrival destination&quot;</span><span class="p">)</span>
</span><span id="__span-25-14"><a id="__codelineno-25-14" name="__codelineno-25-14"></a><span class="w">            </span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">TextUtil</span><span class="p">.</span><span class="nx">cycleString</span><span class="p">(</span><span class="nx">arrival</span><span class="p">.</span><span class="nx">destination</span><span class="p">()))</span>
</span><span id="__span-25-15"><a id="__codelineno-25-15" name="__codelineno-25-15"></a><span class="hll"><span class="w">            </span><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">rowY</span><span class="p">)</span>
</span></span><span id="__span-25-16"><a id="__codelineno-25-16" name="__codelineno-25-16"></a><span class="w">            </span><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="mf">1.25</span><span class="p">)</span>
</span><span id="__span-25-17"><a id="__codelineno-25-17" name="__codelineno-25-17"></a><span class="w">            </span><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span><span id="__span-25-18"><a id="__codelineno-25-18" name="__codelineno-25-18"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-25-19"><a id="__codelineno-25-19" name="__codelineno-25-19"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-25-20"><a id="__codelineno-25-20" name="__codelineno-25-20"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>As for the <code>13</code>, since it won't be changed at runtime, we can use the <code>const</code> keyword to indicate that this is a constant variable and would never change:</p>
<div class="language-js highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">pids_tut.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-26-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-26-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-26-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-26-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-26-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-26-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-26-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-26-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-26-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-26-10">10</a></span>
<span class="normal"><a href="#__codelineno-26-11">11</a></span>
<span class="normal"><a href="#__codelineno-26-12">12</a></span>
<span class="normal"><a href="#__codelineno-26-13">13</a></span>
<span class="normal"><a href="#__codelineno-26-14">14</a></span>
<span class="normal"><a href="#__codelineno-26-15">15</a></span>
<span class="normal"><a href="#__codelineno-26-16">16</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="hll"><span class="kd">const</span><span class="w"> </span><span class="nx">HEADER_HEIGHT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">13</span><span class="p">;</span>
</span></span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2"></a>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3"></a><span class="kd">function</span><span class="w"> </span><span class="nx">create</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">pids</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4"></a><span class="w">    </span><span class="c1">// ... code</span>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5"></a><span class="p">}</span>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6"></a>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7"></a><span class="kd">function</span><span class="w"> </span><span class="nx">render</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">pids</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8"></a><span class="w">    </span><span class="c1">// ... code before</span>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9"></a><span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">pids</span><span class="p">.</span><span class="nx">rows</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10"></a><span class="hll"><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">rowY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">HEADER_HEIGHT</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="nx">i</span><span class="o">*</span><span class="mf">16.75</span><span class="p">);</span>
</span></span><span id="__span-26-11"><a id="__codelineno-26-11" name="__codelineno-26-11"></a><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">arrival</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">pids</span><span class="p">.</span><span class="nx">arrivals</span><span class="p">().</span><span class="nx">get</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
</span><span id="__span-26-12"><a id="__codelineno-26-12" name="__codelineno-26-12"></a><span class="w">        </span><span class="c1">// ...</span>
</span><span id="__span-26-13"><a id="__codelineno-26-13" name="__codelineno-26-13"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-14"><a id="__codelineno-26-14" name="__codelineno-26-14"></a><span class="w">    </span><span class="c1">// ... code after</span>
</span><span id="__span-26-15"><a id="__codelineno-26-15" name="__codelineno-26-15"></a><span class="p">}</span>
</span><span id="__span-26-16"><a id="__codelineno-26-16" name="__codelineno-26-16"></a><span class="c1">// ... code</span>
</span></code></pre></div></td></tr></table></div>
<p>Neat!</p>
<p><img alt="A PIDS with a RV PIDS background, and 4 arrival destination" src="img/JCM_JS_PIDS_Tutorial_v1.3.png" /></p>
<h3 id="estimated-arrival-time-text">Estimated Arrival Time Text<a class="headerlink" href="#estimated-arrival-time-text" title="Anchor link to this section for reference">#</a></h3>
<p>Showing the destination is cool, but wouldn't it be even better if players can see when does the next train arrives? Let's add that as well, following the regular RV PIDS Layout which aligns the text to the right-most screen.</p>
<p>As we have learnt previously, we can get the width of the pids via <code>pids.width</code>, so what we could do is to set the text's <code>x</code> position to the width so that it renders at the end of the screen.</p>
<div class="language-js highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">pids_tut.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-27-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-27-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-27-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-27-10">10</a></span>
<span class="normal"><a href="#__codelineno-27-11">11</a></span>
<span class="normal"><a href="#__codelineno-27-12">12</a></span>
<span class="normal"><a href="#__codelineno-27-13">13</a></span>
<span class="normal"><a href="#__codelineno-27-14">14</a></span>
<span class="normal"><a href="#__codelineno-27-15">15</a></span>
<span class="normal"><a href="#__codelineno-27-16">16</a></span>
<span class="normal"><a href="#__codelineno-27-17">17</a></span>
<span class="normal"><a href="#__codelineno-27-18">18</a></span>
<span class="normal"><a href="#__codelineno-27-19">19</a></span>
<span class="normal"><a href="#__codelineno-27-20">20</a></span>
<span class="normal"><a href="#__codelineno-27-21">21</a></span>
<span class="normal"><a href="#__codelineno-27-22">22</a></span>
<span class="normal"><a href="#__codelineno-27-23">23</a></span>
<span class="normal"><a href="#__codelineno-27-24">24</a></span>
<span class="normal"><a href="#__codelineno-27-25">25</a></span>
<span class="normal"><a href="#__codelineno-27-26">26</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-27-7"><a id="__codelineno-27-7" name="__codelineno-27-7"></a><span class="kd">function</span><span class="w"> </span><span class="nx">render</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">pids</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-27-8"><a id="__codelineno-27-8" name="__codelineno-27-8"></a><span class="w">    </span><span class="c1">// ... code for drawing background</span>
</span><span id="__span-27-9"><a id="__codelineno-27-9" name="__codelineno-27-9"></a><span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">pids</span><span class="p">.</span><span class="nx">rows</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-27-10"><a id="__codelineno-27-10" name="__codelineno-27-10"></a><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">rowY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">HEADER_HEIGHT</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="nx">i</span><span class="o">*</span><span class="mf">16.75</span><span class="p">);</span>
</span><span id="__span-27-11"><a id="__codelineno-27-11" name="__codelineno-27-11"></a><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">arrival</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">pids</span><span class="p">.</span><span class="nx">arrivals</span><span class="p">().</span><span class="nx">get</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
</span><span id="__span-27-12"><a id="__codelineno-27-12" name="__codelineno-27-12"></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="nx">arrival</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-27-13"><a id="__codelineno-27-13" name="__codelineno-27-13"></a><span class="w">            </span><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Arrival destination&quot;</span><span class="p">)</span>
</span><span id="__span-27-14"><a id="__codelineno-27-14" name="__codelineno-27-14"></a><span class="w">            </span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">TextUtil</span><span class="p">.</span><span class="nx">cycleString</span><span class="p">(</span><span class="nx">arrival</span><span class="p">.</span><span class="nx">destination</span><span class="p">()))</span>
</span><span id="__span-27-15"><a id="__codelineno-27-15" name="__codelineno-27-15"></a><span class="w">            </span><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">rowY</span><span class="p">)</span>
</span><span id="__span-27-16"><a id="__codelineno-27-16" name="__codelineno-27-16"></a><span class="w">            </span><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="mf">1.25</span><span class="p">)</span>
</span><span id="__span-27-17"><a id="__codelineno-27-17" name="__codelineno-27-17"></a><span class="w">            </span><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span><span id="__span-27-18"><a id="__codelineno-27-18" name="__codelineno-27-18"></a>
</span><span id="__span-27-19"><a id="__codelineno-27-19" name="__codelineno-27-19"></a><span class="w">            </span><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Arrival ETA&quot;</span><span class="p">)</span>
</span><span id="__span-27-20"><a id="__codelineno-27-20" name="__codelineno-27-20"></a><span class="w">            </span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;3 min&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">// Dummy ETA text for now</span>
</span><span id="__span-27-21"><a id="__codelineno-27-21" name="__codelineno-27-21"></a><span class="hll"><span class="w">            </span><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="nx">pids</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span><span class="w"> </span><span class="nx">rowY</span><span class="p">)</span>
</span></span><span id="__span-27-22"><a id="__codelineno-27-22" name="__codelineno-27-22"></a><span class="w">            </span><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="mf">1.25</span><span class="p">)</span>
</span><span id="__span-27-23"><a id="__codelineno-27-23" name="__codelineno-27-23"></a><span class="w">            </span><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span><span id="__span-27-24"><a id="__codelineno-27-24" name="__codelineno-27-24"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-27-25"><a id="__codelineno-27-25" name="__codelineno-27-25"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-27-26"><a id="__codelineno-27-26" name="__codelineno-27-26"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<div class="admonition note inline end">
<p class="admonition-title">Note</p>
<p>Here serves as another reminder that the contents we have rendered so far are drawn <em>physically</em> in the world.</p>
<p>JCM does not create a texture for you to render the screen on, as such your elements can go out of the screen entirely, even out of the PIDS block itself.</p>
</div>
<p><img alt="A PIDS with arrivals and eta text, but the eta text overflowed to the right" src="img/JCM_JS_PIDS_Tutorial_v1.4.png" /><br />
<small>... oh well that's a bit more than the end of screen ^^;</small></p>
<p>Now the code is indeed doing what we told it to do: <strong>Render text at the end of the screen.</strong><br />
However the issue is that under the default text configuration, the text is <strong>left-aligned</strong>, and thus the x we give it is just the <em>starting point</em> of the text.</p>
<p><img alt="A visualization between left/middle/right aligned text" src="img/JCM_JS_PIDS_Tutorial_v1.5.png" /><br />
<small>Illustration of the issue we are facing</small></p>
<p>To fix the issue, we need to <strong>right-align</strong> the text, to do that we can simply append <code>.rightAlign()</code> to our text:</p>
<div class="language-js highlight"><span class="filename">pids_tut.js</span><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="c1">// ... code before</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Arrival ETA&quot;</span><span class="p">)</span>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;3 min&quot;</span><span class="p">)</span>
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="nx">pids</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span><span class="w"> </span><span class="nx">rowY</span><span class="p">)</span>
</span><span id="__span-28-5"><a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="mf">1.25</span><span class="p">)</span>
</span><span id="__span-28-6"><a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a><span class="hll"><span class="p">.</span><span class="nx">rightAlign</span><span class="p">()</span>
</span></span><span id="__span-28-7"><a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span><span id="__span-28-8"><a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a><span class="c1">// ... code after</span>
</span></code></pre></div>
<p><img alt="A PIDS with arrivals and Estimated Arrival Time in the correct place" src="img/JCM_JS_PIDS_Tutorial_v1.6.png" /></p>
<p>The text margin is still not perfect, but it's just a matter of doing some subtraction, which we can do later.</p>
<p>Now let's move on to functionality:<br />
As we have previously established, we can obtain the arrival's destination text with the <code>destination()</code> function.</p>
<p>An arrival entry have more functions than that. For a full list you can check <a href="../../../scripting/pids/#arrivalswrapper">ArrivalWrapper</a>.</p>
<p>For our purposes, we are going to use the <code>arrivalTime()</code> function. This returns the <strong>epoch time</strong> the train is arriving at (in millisecond), or in other word, how many millisecond (1/1000th of a second) have passed since 1 January 1970.</p>
<p>This in of itself is not that useful, but we can use JavaScript's Date Object <code>Date.now()</code> to obtain the same thing, except referring to the time now. This also means we can use that to compare the time between now and the arrival time!</p>
<div class="language-js highlight"><span class="filename">pids_tut.js</span><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="c1">// ... code before</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="hll"><span class="kd">let</span><span class="w"> </span><span class="nx">eta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">arrival</span><span class="p">.</span><span class="nx">arrivalTime</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span><span class="w"> </span><span class="c1">// Difference between our estimated arrival time (future) and now</span>
</span></span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Arrival ETA&quot;</span><span class="p">)</span>
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a><span class="hll"><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">eta</span><span class="p">)</span><span class="w"> </span><span class="c1">// Change the text to render our eta</span>
</span></span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="nx">pids</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span><span class="w"> </span><span class="nx">rowY</span><span class="p">)</span>
</span><span id="__span-29-6"><a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a><span class="c1">// ... code after</span>
</span></code></pre></div>
<p>Now you should see umm... big numbers rapidly counting down:</p>
<p><img alt="PIDS with 4 arrivals, the ETA text is showing the remaining millisecond until the train arrives" src="img/JCM_JS_PIDS_Tutorial_v1.7.png" /></p>
<p>If you are lucky enough to have a train stopping during this (As seen above), you'll see that the number rolls to the negative. This is because the train have <em>already arrived</em>.</p>
<p>So for example <code>-4721</code> here means that the train have already arrived for <strong>4.721</strong> second, while <code>43963</code> means that the train will arrive in <strong>43.963</strong> second, since the number is represented in millisecond (1/1000th of a second).</p>
<p>As such, we can obtain the second remaining by dividing it by 1000:</p>
<div class="language-js highlight"><span class="filename">pids_tut.js</span><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="c1">// ... code before</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="hll"><span class="kd">let</span><span class="w"> </span><span class="nx">eta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">arrival</span><span class="p">.</span><span class="nx">arrivalTime</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">())</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">1000</span><span class="p">;</span>
</span></span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Arrival ETA&quot;</span><span class="p">)</span>
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">eta</span><span class="p">)</span>
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a><span class="c1">// ... code after</span>
</span></code></pre></div>
<p><img alt="PIDS with 4 arrivals, the ETA text is showing the remaining seconds with decimal until the train arrives" src="img/JCM_JS_PIDS_Tutorial_v1.8.png" />  </p>
<p>Now we just need to round the number to get a full integer:</p>
<div class="language-js highlight"><span class="filename">pids_tut.js</span><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="c1">// ... code before</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="hll"><span class="kd">let</span><span class="w"> </span><span class="nx">eta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">((</span><span class="nx">arrival</span><span class="p">.</span><span class="nx">arrivalTime</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">())</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">1000</span><span class="p">);</span>
</span></span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Arrival ETA&quot;</span><span class="p">)</span>
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">eta</span><span class="p">)</span>
</span><span id="__span-31-5"><a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a><span class="c1">// ... code after</span>
</span></code></pre></div>
<p>We could continue implementing like this, however I'll leave this as an exercise to the viewer after finish this tutorial :)</p>
<p>Instead for now we can go the slightly lazy route: JCM have included a helper script by default, namely <strong>PIDSUtil</strong>, which have a function to automatically format ETA text.</p>
<p>Here, we can use the <code>include()</code> function to import the PIDSUtil script:</p>
<div class="language-js highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">pids_tut.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-32-1">1</a></span>
<span class="normal"><a href="#__codelineno-32-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1"></a><span class="hll"><span class="nx">include</span><span class="p">(</span><span class="nx">Resources</span><span class="p">.</span><span class="nx">id</span><span class="p">(</span><span class="s2">&quot;jsblock:scripts/pids_util.js&quot;</span><span class="p">));</span><span class="w"> </span><span class="c1">// Built-in script shipped with JCM</span>
</span></span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2"></a><span class="c1">// ... Rest of the script</span>
</span></code></pre></div></td></tr></table></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We can only include scripts while JCM is parsing the script (i.e. Outside of function). It is not possible to put them in the <code>render</code> function for example, as by that time JCM has already finished parsing the entire script, and it's only calling your function.</p>
</div>
<p>Now that we have imported the script, we can now use it's function, <code>PIDSUtil.getETAText(time: number)</code>:</p>
<div class="language-js highlight"><span class="filename">pids_tut.js</span><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="c1">// ... code before</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Arrival ETA&quot;</span><span class="p">)</span>
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="hll"><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">PIDSUtil</span><span class="p">.</span><span class="nx">getETAText</span><span class="p">(</span><span class="nx">arrival</span><span class="p">.</span><span class="nx">arrivalTime</span><span class="p">()))</span>
</span></span><span id="__span-33-4"><a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="nx">pids</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span><span class="w"> </span><span class="nx">rowY</span><span class="p">)</span>
</span><span id="__span-33-5"><a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="mf">1.25</span><span class="p">)</span>
</span><span id="__span-33-6"><a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a><span class="p">.</span><span class="nx">rightAlign</span><span class="p">()</span>
</span><span id="__span-33-7"><a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span><span id="__span-33-8"><a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a><span class="c1">// ... code after</span>
</span></code></pre></div>
<p>After reloading, you should see that it returns a raw string without any language separation. However more importantly the unit is correct. (mins/sec)</p>
<p><img alt="PIDS with 4 arrivals, the ETA text is showing the remaining time, reported in both Chinese and English" src="img/JCM_JS_PIDS_Tutorial_v1.9.png" /></p>
<p>And as we have learnt from handling the destination text, we can wrap it with <code>TextUtil.cycleString()</code>:</p>
<div class="language-js highlight"><span class="filename">pids_tut.js</span><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="c1">// ... code before</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Arrival ETA&quot;</span><span class="p">)</span>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="hll"><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">TextUtil</span><span class="p">.</span><span class="nx">cycleString</span><span class="p">(</span><span class="nx">PIDSUtil</span><span class="p">.</span><span class="nx">getETAText</span><span class="p">(</span><span class="nx">arrival</span><span class="p">.</span><span class="nx">arrivalTime</span><span class="p">())))</span>
</span></span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a><span class="c1">// ... code after</span>
</span></code></pre></div>
<p>And finally to not start a war, let's apply some spacing to both the destination and ETA text so it doesn't lean along the edge:</p>
<p><div class="language-js highlight"><span class="filename">pids_tut.js</span><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="c1">// ... code before</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Arrival destination&quot;</span><span class="p">)</span>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="c1">// ... code</span>
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="hll"><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="mf">8</span><span class="p">,</span><span class="w"> </span><span class="nx">rowY</span><span class="p">)</span>
</span></span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a><span class="c1">// ... code</span>
</span><span id="__span-35-6"><a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a>
</span><span id="__span-35-7"><a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Arrival ETA&quot;</span><span class="p">)</span>
</span><span id="__span-35-8"><a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a><span class="c1">// ... code</span>
</span><span id="__span-35-9"><a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a><span class="hll"><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="nx">pids</span><span class="p">.</span><span class="nx">width</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">8</span><span class="p">,</span><span class="w"> </span><span class="nx">rowY</span><span class="p">)</span>
</span></span><span id="__span-35-10"><a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a><span class="c1">// ... code after</span>
</span></code></pre></div>
<img alt="A correctly looking PIDS with 4 arrivals, including the arrival time" src="img/JCM_JS_PIDS_Tutorial_v1.10.png" /></p>
<h2 id="v2-light-rail-light-rail-everywhere">v2: Light Rail, Light Rail Everywhere!<a class="headerlink" href="#v2-light-rail-light-rail-everywhere" title="Anchor link to this section for reference">#</a></h2>
<p>Now it's time to add the light rail route symbol.</p>
<p>First, let's move our destination text to the right, 30 unit to be exact, so we can reserve some space for our light rail symbol on the left:</p>
<div class="language-js highlight"><span class="filename">pids_tut.js</span><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="c1">// ... code before</span>
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Arrival destination&quot;</span><span class="p">)</span>
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a><span class="c1">// ...</span>
</span><span id="__span-36-4"><a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a><span class="hll"><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="mf">30</span><span class="p">,</span><span class="w"> </span><span class="nx">rowY</span><span class="p">)</span>
</span></span><span id="__span-36-5"><a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a><span class="c1">// ... code after</span>
</span></code></pre></div>
<h3 id="drawing-the-light-rail-symbol">Drawing the Light Rail Symbol<a class="headerlink" href="#drawing-the-light-rail-symbol" title="Anchor link to this section for reference">#</a></h3>
<p>For reference, this is the symbol used for Hong Kong Light Rail Route:</p>
<p><img alt="A pill-shaped symbol with red border, an inner black border and the route number" src="img/JCM_JS_PIDS_Tutorial_v2.1.png" /><br />
<small>This is a replica render of the symbol, but should look close-enough</small></p>
<p>It is consisted of a pill with white-background, followed by a thick route colored border, and a black border inside that.</p>
<p>To understand how we should approach this, let's take a look at the resource file provided in the tutorial resource pack, under <code>assets/jsblock/textures/lrr.png</code>:</p>
<p><img alt="A monochrome variant of the light rail symbol, with the middle part being transparent" src="img/JCM_JS_PIDS_Tutorial_v2.2.png" /><br />
<small>The texture quality itself is... not the greatest, but let me be lazy while I can get away with it :P</small></p>
<p>Essentially this is just the above version, but without the centered white part, and the route color being white.</p>
<p>The reason why it's white is because we will be tinting the texture color to follow our route color.<br />
An easier way to think of it is "<em>how white the color is = how bright the color is</em>".</p>
<p>This means that the white-part will be colored to our route's color, while the black border remains black, because it's brightness is essentially 0%. No matter how you tint black, it's still black.</p>
<p>As for the centered pill-shaped part, we have to draw it separately, as that part shall not be tinted with our route color. So let's get started!</p>
<div class="language-js highlight"><span class="filename">pids_tut.js</span><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="c1">// ... code before</span>
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a><span class="hll"><span class="nx">Texture</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;LRT Circle Colored&quot;</span><span class="p">)</span>
</span></span><span id="__span-37-3"><a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a><span class="hll"><span class="p">.</span><span class="nx">texture</span><span class="p">(</span><span class="s2">&quot;jsblock:textures/lrr.png&quot;</span><span class="p">)</span>
</span></span><span id="__span-37-4"><a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a><span class="hll"><span class="p">.</span><span class="nx">color</span><span class="p">(</span><span class="nx">arrival</span><span class="p">.</span><span class="nx">routeColor</span><span class="p">())</span><span class="w"> </span><span class="c1">// Note this part!</span>
</span></span><span id="__span-37-5"><a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a><span class="hll"><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="nx">rowY</span><span class="p">)</span>
</span></span><span id="__span-37-6"><a id="__codelineno-37-6" name="__codelineno-37-6" href="#__codelineno-37-6"></a><span class="hll"><span class="p">.</span><span class="nx">size</span><span class="p">(</span><span class="mf">23</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">)</span>
</span></span><span id="__span-37-7"><a id="__codelineno-37-7" name="__codelineno-37-7" href="#__codelineno-37-7"></a><span class="hll"><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span></span><span id="__span-37-8"><a id="__codelineno-37-8" name="__codelineno-37-8" href="#__codelineno-37-8"></a>
</span><span id="__span-37-9"><a id="__codelineno-37-9" name="__codelineno-37-9" href="#__codelineno-37-9"></a><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Arrival destination&quot;</span><span class="p">)</span>
</span><span id="__span-37-10"><a id="__codelineno-37-10" name="__codelineno-37-10" href="#__codelineno-37-10"></a><span class="c1">// ... code after</span>
</span></code></pre></div>
<p>Essentially this draws our texture <code>jsblock:textures/lrr.png</code>, with the color set (or tinted) to the arrival's route color. The rest is just stuff we have learnt in the past :D</p>
<p><img alt="A PIDS with 4 arrival, now with an empty pill-shaped symbol at the left of each arrival" src="img/JCM_JS_PIDS_Tutorial_v2.3.png" /></p>
<p>Nice, we are already 60% there. Now we just need to fill the white pill-shaped background.</p>
<p>There are multiple ways to achieve that, but the one we are going to use in the tutorial is to layer a white rectangle behind the pill-shaped symbol:</p>
<p><img alt="Visualization of a white rectangle placed behind the pill-shaped symbol" src="img/JCM_JS_PIDS_Tutorial_v2.4.png" /><br />
<small>Imagine the green border as the border the white rectangle, which is placed behind our symbol</small></p>
<div class="language-js highlight"><span class="filename">pids_tut.js</span><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="c1">// ... code before</span>
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a><span class="hll"><span class="nx">Texture</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;LRT Circle White&quot;</span><span class="p">)</span>
</span></span><span id="__span-38-3"><a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a><span class="hll"><span class="p">.</span><span class="nx">texture</span><span class="p">(</span><span class="s2">&quot;mtr:textures/block/white.png&quot;</span><span class="p">)</span>
</span></span><span id="__span-38-4"><a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a><span class="hll"><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="mf">7.5</span><span class="p">,</span><span class="w"> </span><span class="nx">rowY</span><span class="o">+</span><span class="mf">1.5</span><span class="p">)</span>
</span></span><span id="__span-38-5"><a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a><span class="hll"><span class="p">.</span><span class="nx">size</span><span class="p">(</span><span class="mf">18</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">)</span>
</span></span><span id="__span-38-6"><a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a><span class="hll"><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span></span><span id="__span-38-7"><a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a>
</span><span id="__span-38-8"><a id="__codelineno-38-8" name="__codelineno-38-8" href="#__codelineno-38-8"></a><span class="nx">Texture</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;LRT Circle Colored&quot;</span><span class="p">)</span>
</span><span id="__span-38-9"><a id="__codelineno-38-9" name="__codelineno-38-9" href="#__codelineno-38-9"></a><span class="p">.</span><span class="nx">texture</span><span class="p">(</span><span class="s2">&quot;jsblock:textures/lrr.png&quot;</span><span class="p">)</span>
</span><span id="__span-38-10"><a id="__codelineno-38-10" name="__codelineno-38-10" href="#__codelineno-38-10"></a><span class="c1">// ... code after</span>
</span></code></pre></div>
<p>Again, remember first to draw, first to be covered. It needs to be drawn first before the colored pill, so that it can stay behind the colored pill.</p>
<div class="admonition note inline end">
<p class="admonition-title">(Self Note)</p>
<p>Maybe it does make sense to implement <code>Rectangle</code> alongside <code>Text</code> and <code>Texture</code> as well... but for now this will do!</p>
</div>
<p>Also worth nothing is the texture <code>mtr:textures/block/white.png</code>. This is a built-in texture in the <abbr title="Minecraft Transit Railway">MTR mod</abbr> that's literally just a solid white color, which can coincidentally be used in this situation.</p>
<p>Nothing note-worthy other than that however. The position and size is already given for the sake of this tutorial, but in practice you may need some trial and error to get it right.</p>
<p>Now we just need to draw the route number, <em>do it after we draw the pill so it stays on top</em>:</p>
<div class="language-js highlight"><span class="filename">pids_tut.js</span><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="c1">// ... code before</span>
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a><span class="nx">Texture</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;LRT Circle Colored&quot;</span><span class="p">)</span>
</span><span id="__span-39-3"><a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a><span class="c1">// ...</span>
</span><span id="__span-39-4"><a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span><span id="__span-39-5"><a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a>
</span><span id="__span-39-6"><a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a><span class="hll"><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;LRT Number Text&quot;</span><span class="p">)</span>
</span></span><span id="__span-39-7"><a id="__codelineno-39-7" name="__codelineno-39-7" href="#__codelineno-39-7"></a><span class="hll"><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">arrival</span><span class="p">.</span><span class="nx">routeNumber</span><span class="p">())</span>
</span></span><span id="__span-39-8"><a id="__codelineno-39-8" name="__codelineno-39-8" href="#__codelineno-39-8"></a><span class="hll"><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="mf">0.55</span><span class="p">)</span>
</span></span><span id="__span-39-9"><a id="__codelineno-39-9" name="__codelineno-39-9" href="#__codelineno-39-9"></a><span class="hll"><span class="p">.</span><span class="nx">centerAlign</span><span class="p">()</span>
</span></span><span id="__span-39-10"><a id="__codelineno-39-10" name="__codelineno-39-10" href="#__codelineno-39-10"></a><span class="hll"><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="mf">16.5</span><span class="p">,</span><span class="w"> </span><span class="nx">rowY</span><span class="o">+</span><span class="mf">3</span><span class="p">)</span>
</span></span><span id="__span-39-11"><a id="__codelineno-39-11" name="__codelineno-39-11" href="#__codelineno-39-11"></a><span class="hll"><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span></span><span id="__span-39-12"><a id="__codelineno-39-12" name="__codelineno-39-12" href="#__codelineno-39-12"></a><span class="c1">// .. code after</span>
</span></code></pre></div>
<p>As for the platform number, here's the code as there's not a lot of things worth noting either:</p>
<div class="language-js highlight"><span class="filename">pids_tut.js</span><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="c1">// ... code before</span>
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Destination Text&quot;</span><span class="p">)</span>
</span><span id="__span-40-3"><a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a><span class="c1">// ...</span>
</span><span id="__span-40-4"><a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span><span id="__span-40-5"><a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a>
</span><span id="__span-40-6"><a id="__codelineno-40-6" name="__codelineno-40-6" href="#__codelineno-40-6"></a><span class="hll"><span class="nx">Texture</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Platform Circle&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">// Draw our circle texture</span>
</span></span><span id="__span-40-7"><a id="__codelineno-40-7" name="__codelineno-40-7" href="#__codelineno-40-7"></a><span class="hll"><span class="p">.</span><span class="nx">texture</span><span class="p">(</span><span class="s2">&quot;jsblock:textures/block/pids/plat_circle.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">// Built-in to JCM</span>
</span></span><span id="__span-40-8"><a id="__codelineno-40-8" name="__codelineno-40-8" href="#__codelineno-40-8"></a><span class="hll"><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="mf">79</span><span class="p">,</span><span class="w"> </span><span class="nx">rowY</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span>
</span></span><span id="__span-40-9"><a id="__codelineno-40-9" name="__codelineno-40-9" href="#__codelineno-40-9"></a><span class="hll"><span class="p">.</span><span class="nx">size</span><span class="p">(</span><span class="mf">10.5</span><span class="p">,</span><span class="w"> </span><span class="mf">10.5</span><span class="p">)</span>
</span></span><span id="__span-40-10"><a id="__codelineno-40-10" name="__codelineno-40-10" href="#__codelineno-40-10"></a><span class="hll"><span class="p">.</span><span class="nx">color</span><span class="p">(</span><span class="mh">0xD2A808</span><span class="p">)</span><span class="w"> </span><span class="c1">// #D2A808 is color for HK LRT Network</span>
</span></span><span id="__span-40-11"><a id="__codelineno-40-11" name="__codelineno-40-11" href="#__codelineno-40-11"></a><span class="hll"><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span></span><span id="__span-40-12"><a id="__codelineno-40-12" name="__codelineno-40-12" href="#__codelineno-40-12"></a>
</span><span id="__span-40-13"><a id="__codelineno-40-13" name="__codelineno-40-13" href="#__codelineno-40-13"></a><span class="hll"><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Platform Circle Text&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">// Draw the text</span>
</span></span><span id="__span-40-14"><a id="__codelineno-40-14" name="__codelineno-40-14" href="#__codelineno-40-14"></a><span class="hll"><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">arrival</span><span class="p">.</span><span class="nx">platformName</span><span class="p">())</span><span class="w"> </span><span class="c1">// We can use platformName() to obtain the platform no.</span>
</span></span><span id="__span-40-15"><a id="__codelineno-40-15" name="__codelineno-40-15" href="#__codelineno-40-15"></a><span class="hll"><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="mf">84</span><span class="p">,</span><span class="w"> </span><span class="nx">rowY</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span>
</span></span><span id="__span-40-16"><a id="__codelineno-40-16" name="__codelineno-40-16" href="#__codelineno-40-16"></a><span class="hll"><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="mf">0.9</span><span class="p">)</span>
</span></span><span id="__span-40-17"><a id="__codelineno-40-17" name="__codelineno-40-17" href="#__codelineno-40-17"></a><span class="hll"><span class="p">.</span><span class="nx">centerAlign</span><span class="p">()</span>
</span></span><span id="__span-40-18"><a id="__codelineno-40-18" name="__codelineno-40-18" href="#__codelineno-40-18"></a><span class="hll"><span class="p">.</span><span class="nx">color</span><span class="p">(</span><span class="mh">0xFFFFFF</span><span class="p">)</span><span class="w"> </span><span class="c1">// #FFFFFF is white text</span>
</span></span><span id="__span-40-19"><a id="__codelineno-40-19" name="__codelineno-40-19" href="#__codelineno-40-19"></a><span class="hll"><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span></span><span id="__span-40-20"><a id="__codelineno-40-20" name="__codelineno-40-20" href="#__codelineno-40-20"></a><span class="c1">// ... code after</span>
</span></code></pre></div>
<p>Just to keep you <em>in the loop <small>(Pun intended)</small></em>, what we are doing so far is ran for each arrival row, because we have setup a <em>for-loop</em> at the top.</p>
<p>So if you are going to render thing one-time on the screen, then you should place the logic <em>outside</em> this loop~</p>
<p><img alt="An RV PIDS with 4 arrivals, and a Light Rail Route Number symbol on the left of each row" src="img/JCM_JS_PIDS_Tutorial_v2.5.png" /></p>
<p>Not bad!</p>
<h2 id="v3-the-pids-called-they-wanted-their-header-bar-back">v3: The PIDS called, they wanted their header bar back<a class="headerlink" href="#v3-the-pids-called-they-wanted-their-header-bar-back" title="Anchor link to this section for reference">#</a></h2>
<p>The <strong>header bar</strong> refers to the blue bar seen at the top.</p>
<p>The built-in RV PIDS preset in JCM contains a weather texture on the left, and a 24-hour clock on the right.</p>
<h3 id="weather-icon">Weather Icon<a class="headerlink" href="#weather-icon" title="Anchor link to this section for reference">#</a></h3>
<p>There are 3 distinct texture for weather icon used in the default RV PIDS preset:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Image Preview</th>
<th style="text-align: left;">Texture ID</th>
<th style="text-align: left;">Used when</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><img alt="" src="img/weather_sunny.png" /></td>
<td style="text-align: left;"><code>jsblock:textures/block/pids/weather_sunny.png</code></td>
<td style="text-align: left;">There's no rain nor thunderstorm in the current world.</td>
</tr>
<tr>
<td style="text-align: left;"><img alt="" src="img/weather_rainy.png" /></td>
<td style="text-align: left;"><code>jsblock:textures/block/pids/weather_rainy.png</code></td>
<td style="text-align: left;">There's rain, but not thunderstorm in the current world.</td>
</tr>
<tr>
<td style="text-align: left;"><img alt="" src="img/weather_thunder.png" /></td>
<td style="text-align: left;"><code>jsblock:textures/block/pids/weather_thunder.png</code></td>
<td style="text-align: left;">There's a thunderstorm in the current world.</td>
</tr>
</tbody>
</table>
<p>As such, we need to use different texture depending on the situation.</p>
<p>To check the weather for the current world, we can use the <a href="../../../scripting/utilities/#minecraftclient">MinecraftClient</a> class, which provides a couple of functions, namely <code>MinecraftClient.worldIsRaining()</code> and <code>MinecraftClient.worldIsThundering()</code>.</p>
<p>We can then first declare a variable which represents the texture we are going to use, we are going to assign a value to it later:</p>
<div class="language-js highlight"><span class="filename">pids_tut.js</span><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="c1">// ... code for drawing background</span>
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a><span class="hll"><span class="kd">let</span><span class="w"> </span><span class="nx">weatherImg</span><span class="p">;</span><span class="w"> </span><span class="c1">// (1)!</span>
</span></span><span id="__span-41-3"><a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a>
</span><span id="__span-41-4"><a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a><span class="k">for</span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">pids</span><span class="p">.</span><span class="nx">rows</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-41-5"><a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a><span class="w">    </span><span class="c1">// ... code for drawing arrival</span>
</span><span id="__span-41-6"><a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a><span class="p">}</span>
</span></code></pre></div>
<ol>
<li>Note how we placed this outside the arrival for-loop. This is because we only want to draw this 1 time instead of per arrival.<br>At the same time we need to draw this <em>after</em> the background, as we don't want the background to cover our image.</li>
</ol>
<p>Now we can start checking from the order <strong>thunderstorm &gt; raining &gt; sunny</strong>, and assign the appropriate texture ID:</p>
<div class="admonition note inline end">
<p class="admonition-title">Checking Order</p>
<p>The reason why we have to check in this order is because when a thunderstorm is active, it is also considered raining.<br />
As such we can't check if it's raining first, as otherwise it will always use the rainy texture.</p>
<p>And finally if it's neither raining nor thundering, then the sky has to be clear.</p>
</div>
<div class="language-js highlight"><span class="filename">pids_tut.js</span><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="c1">// ... code for drawing background</span>
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a><span class="kd">let</span><span class="w"> </span><span class="nx">weatherImg</span><span class="p">;</span>
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a>
</span><span id="__span-42-4"><a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a><span class="hll"><span class="k">if</span><span class="p">(</span><span class="nx">MinecraftClient</span><span class="p">.</span><span class="nx">worldIsThundering</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span></span><span id="__span-42-5"><a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a><span class="hll"><span class="w">    </span><span class="nx">weatherImg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;jsblock:textures/block/pids/weather_thunder.png&quot;</span><span class="p">;</span>
</span></span><span id="__span-42-6"><a id="__codelineno-42-6" name="__codelineno-42-6" href="#__codelineno-42-6"></a><span class="hll"><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="nx">MinecraftClient</span><span class="p">.</span><span class="nx">worldIsRaining</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span></span><span id="__span-42-7"><a id="__codelineno-42-7" name="__codelineno-42-7" href="#__codelineno-42-7"></a><span class="hll"><span class="w">    </span><span class="nx">weatherImg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;jsblock:textures/block/pids/weather_raining.png&quot;</span><span class="p">;</span>
</span></span><span id="__span-42-8"><a id="__codelineno-42-8" name="__codelineno-42-8" href="#__codelineno-42-8"></a><span class="hll"><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span></span><span id="__span-42-9"><a id="__codelineno-42-9" name="__codelineno-42-9" href="#__codelineno-42-9"></a><span class="hll"><span class="w">    </span><span class="nx">weatherImg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;jsblock:textures/block/pids/weather_sunny.png&quot;</span><span class="p">;</span>
</span></span><span id="__span-42-10"><a id="__codelineno-42-10" name="__codelineno-42-10" href="#__codelineno-42-10"></a><span class="hll"><span class="p">}</span>
</span></span></code></pre></div>
<p>Now, let's draw the texture with our <code>weatherImg</code> variable:</p>
<div class="language-js highlight"><span class="filename">pids_tut.js</span><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="w">    </span><span class="c1">// ... code for checking weather icon</span>
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a><span class="w">    </span><span class="nx">weatherImg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;jsblock:textures/block/pids/weather_sunny.png&quot;</span><span class="p">;</span>
</span><span id="__span-43-3"><a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a><span class="p">}</span>
</span><span id="__span-43-4"><a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a>
</span><span id="__span-43-5"><a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a><span class="hll"><span class="nx">Texture</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Weather Icon&quot;</span><span class="p">)</span>
</span></span><span id="__span-43-6"><a id="__codelineno-43-6" name="__codelineno-43-6" href="#__codelineno-43-6"></a><span class="hll"><span class="p">.</span><span class="nx">texture</span><span class="p">(</span><span class="nx">weatherImg</span><span class="p">)</span>
</span></span><span id="__span-43-7"><a id="__codelineno-43-7" name="__codelineno-43-7" href="#__codelineno-43-7"></a><span class="hll"><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span>
</span></span><span id="__span-43-8"><a id="__codelineno-43-8" name="__codelineno-43-8" href="#__codelineno-43-8"></a><span class="hll"><span class="p">.</span><span class="nx">size</span><span class="p">(</span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">)</span>
</span></span><span id="__span-43-9"><a id="__codelineno-43-9" name="__codelineno-43-9" href="#__codelineno-43-9"></a><span class="hll"><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span></span></code></pre></div>
<h3 id="adding-a-clock">Adding a clock<a class="headerlink" href="#adding-a-clock" title="Anchor link to this section for reference">#</a></h3>
<p>A clock is still a text, as such let's create another text object.</p>
<p>To keep this tutorial in a reasonable length, we will use <code>PIDSUtil</code> again, which provides a utility function for us to call so we don't have to manually format the clock:</p>
<div class="language-js highlight"><span class="filename">pids_tut.js</span><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="c1">// ... code for drawing weather icon</span>
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span><span id="__span-44-3"><a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a>
</span><span id="__span-44-4"><a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a><span class="hll"><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Clock&quot;</span><span class="p">)</span>
</span></span><span id="__span-44-5"><a id="__codelineno-44-5" name="__codelineno-44-5" href="#__codelineno-44-5"></a><span class="hll"><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">PIDSUtil</span><span class="p">.</span><span class="nx">formatTime</span><span class="p">(</span><span class="nx">MinecraftClient</span><span class="p">.</span><span class="nx">worldDayTime</span><span class="p">(),</span><span class="w"> </span><span class="kc">true</span><span class="p">))</span><span class="w"> </span><span class="c1">// Note this here!</span>
</span></span><span id="__span-44-6"><a id="__codelineno-44-6" name="__codelineno-44-6" href="#__codelineno-44-6"></a><span class="hll"><span class="p">.</span><span class="nx">color</span><span class="p">(</span><span class="mh">0xFFFFFF</span><span class="p">)</span>
</span></span><span id="__span-44-7"><a id="__codelineno-44-7" name="__codelineno-44-7" href="#__codelineno-44-7"></a><span class="hll"><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="nx">pids</span><span class="p">.</span><span class="nx">width</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">)</span>
</span></span><span id="__span-44-8"><a id="__codelineno-44-8" name="__codelineno-44-8" href="#__codelineno-44-8"></a><span class="hll"><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="mf">0.9</span><span class="p">)</span>
</span></span><span id="__span-44-9"><a id="__codelineno-44-9" name="__codelineno-44-9" href="#__codelineno-44-9"></a><span class="hll"><span class="p">.</span><span class="nx">rightAlign</span><span class="p">()</span>
</span></span><span id="__span-44-10"><a id="__codelineno-44-10" name="__codelineno-44-10" href="#__codelineno-44-10"></a><span class="hll"><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span></span></code></pre></div>
<p>The function parameter is <code>PIDSUtil.formatTime(minecraftTime, shouldPadZero)</code>.</p>
<p>We can fill the <code>minecraftTime</code> parameter with <code>MinecraftClient.worldDayTime()</code>, which obtains the <a href="https://minecraft.fandom.com/wiki/Daylight_cycle#Minecraft_time_to_real_time">Minecraft time in tick</a>.</p>
<p>As for <code>shouldPadZero</code>, we can set it to true so it returns something like <code>08:30</code> instead of <code>8:30</code>.</p>
<p><img alt="A PIDS equivalent to the default RV PIDS in JCM, with a lrt route number symbol" src="img/JCM_JS_PIDS_Tutorial_v3.1.png" /><br />
<small>Looking good!</small></p>
<h2 id="v4-go-ham">v4: Go ham!<a class="headerlink" href="#v4-go-ham" title="Anchor link to this section for reference">#</a></h2>
<p>Right now things are looking very solid, but this is the <abbr title="Minecraft Transit Railway">MTR mod</abbr> we are talking about, so things quickly falls apart when someone enter <code>Llanfair­pwllgwyngyll­gogery­chwyrn­drobwll­llan­tysilio­gogo­goch</code> as their station name.</p>
<p>"<em>Surely no one would do that, and it's their problem if they do</em>" Ok maybe you have a point, however now let's look at a real-world example, by renaming your destination station from <code>田景|Tin King</code> to <code>天水圍|Tin Shui Wai</code></p>
<p><img alt="A PIDS with 4 arrivals, the destination name (Tin Shui Wai) overlapped with the text afterwards" src="img/JCM_JS_PIDS_Tutorial_v4.1.png" /><br />
<small><em>ummm send help.</em></small></p>
<h3 id="limiting-text-size">Limiting text size<a class="headerlink" href="#limiting-text-size" title="Anchor link to this section for reference">#</a></h3>
<p>As we had learnt, we can set the size of a texture with <code>size(w, h)</code> function. What you might not know however is that the same can actually be done with Text, try it out:</p>
<div class="language-js highlight"><span class="filename">pids_tut.js</span><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Arrival destination&quot;</span><span class="p">)</span>
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">TextUtil</span><span class="p">.</span><span class="nx">cycleString</span><span class="p">(</span><span class="nx">arrival</span><span class="p">.</span><span class="nx">destination</span><span class="p">()))</span>
</span><span id="__span-45-3"><a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="mf">30</span><span class="p">,</span><span class="w"> </span><span class="nx">rowY</span><span class="p">)</span>
</span><span id="__span-45-4"><a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a><span class="hll"><span class="p">.</span><span class="nx">size</span><span class="p">(</span><span class="mf">36</span><span class="p">,</span><span class="w"> </span><span class="mf">9</span><span class="p">)</span>
</span></span><span id="__span-45-5"><a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="mf">1.25</span><span class="p">)</span>
</span><span id="__span-45-6"><a id="__codelineno-45-6" name="__codelineno-45-6" href="#__codelineno-45-6"></a><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span></code></pre></div>
<p>After reloading, you'll notice that nothing has changed at all.</p>
<p>This is intended. The text area actually did got defined, however by default JCM don't take any action if the text went beyond the area.</p>
<p>To do so, we need to tell JCM what to do, with the <code>stretchXY()</code>, <code>scaleXY()</code>, <code>wrapText()</code> and <code>marquee()</code> function:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Function</th>
<th style="text-align: left;">Description</th>
<th style="text-align: left;">Preview</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>stretchXY()</code></td>
<td style="text-align: left;">The text will be stretched according to which axis it overflowed. So if it overflowed horizontally, the text will only be stretched horizontally</td>
<td style="text-align: left;"><img alt="" src="img/JCM_JS_PIDS_Tutorial_Text_stretchXY.png" /></td>
</tr>
<tr>
<td style="text-align: left;"><code>scaleXY()</code></td>
<td style="text-align: left;">The text will be stretched on both-axis to ensure that it stays within the defined size. Or in other word, it maintains the aspect ratio of the text.</td>
<td style="text-align: left;"><img alt="" src="img/JCM_JS_PIDS_Tutorial_Text_scaleXY.png" /></td>
</tr>
<tr>
<td style="text-align: left;"><code>wrapText()</code></td>
<td style="text-align: left;">Any text that overflowed will be rendered in the next line, this might be useful when rendering paragraphs of text.</td>
<td style="text-align: left;"><img alt="" src="img/JCM_JS_PIDS_Tutorial_Text_wrapText.png" /></td>
</tr>
<tr>
<td style="text-align: left;"><code>marquee()</code></td>
<td style="text-align: left;">The text content is cropped to only show the visible section. The text will be continuously shifted to ensure that all portion of the text is shown.</td>
<td style="text-align: left;"><img alt="" src="img/JCM_JS_PIDS_Tutorial_Text_marquee.png" /></td>
</tr>
</tbody>
</table>
<p>For now, we'll go with <code>scaleXY()</code> as I think it looks nicer, you are free to try any other options however!</p>
<div class="language-js highlight"><span class="filename">pids_tut.js</span><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Arrival destination&quot;</span><span class="p">)</span>
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">TextUtil</span><span class="p">.</span><span class="nx">cycleString</span><span class="p">(</span><span class="nx">arrival</span><span class="p">.</span><span class="nx">destination</span><span class="p">()))</span>
</span><span id="__span-46-3"><a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="mf">30</span><span class="p">,</span><span class="w"> </span><span class="nx">rowY</span><span class="p">)</span>
</span><span id="__span-46-4"><a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a><span class="p">.</span><span class="nx">size</span><span class="p">(</span><span class="mf">36</span><span class="p">,</span><span class="w"> </span><span class="mf">9</span><span class="p">)</span>
</span><span id="__span-46-5"><a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a><span class="hll"><span class="p">.</span><span class="nx">scaleXY</span><span class="p">()</span>
</span></span><span id="__span-46-6"><a id="__codelineno-46-6" name="__codelineno-46-6" href="#__codelineno-46-6"></a><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="mf">1.25</span><span class="p">)</span>
</span><span id="__span-46-7"><a id="__codelineno-46-7" name="__codelineno-46-7" href="#__codelineno-46-7"></a><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span></code></pre></div>
<p><img alt="The destination text is now properly scaled" src="img/JCM_JS_PIDS_Tutorial_v4.2.png" /></p>
<p>Nice. Now, we can also apply the same logic to other texts as well:</p>
<div class="language-js highlight"><span class="filename">pids_tut.js</span><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;LRT Number Text&quot;</span><span class="p">)</span>
</span><span id="__span-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">arrival</span><span class="p">.</span><span class="nx">routeNumber</span><span class="p">())</span>
</span><span id="__span-47-3"><a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="mf">0.55</span><span class="p">)</span>
</span><span id="__span-47-4"><a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a><span class="p">.</span><span class="nx">centerAlign</span><span class="p">()</span>
</span><span id="__span-47-5"><a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a><span class="hll"><span class="p">.</span><span class="nx">size</span><span class="p">(</span><span class="mf">26</span><span class="p">,</span><span class="w"> </span><span class="mf">9</span><span class="p">)</span>
</span></span><span id="__span-47-6"><a id="__codelineno-47-6" name="__codelineno-47-6" href="#__codelineno-47-6"></a><span class="hll"><span class="p">.</span><span class="nx">scaleXY</span><span class="p">()</span>
</span></span><span id="__span-47-7"><a id="__codelineno-47-7" name="__codelineno-47-7" href="#__codelineno-47-7"></a><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="mf">16.5</span><span class="p">,</span><span class="w"> </span><span class="nx">rowY</span><span class="o">+</span><span class="mf">2.75</span><span class="p">)</span>
</span><span id="__span-47-8"><a id="__codelineno-47-8" name="__codelineno-47-8" href="#__codelineno-47-8"></a><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span></code></pre></div>
<div class="language-js highlight"><span class="filename">pids_tut.js</span><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Platform Circle Text&quot;</span><span class="p">)</span>
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">arrival</span><span class="p">.</span><span class="nx">platformName</span><span class="p">())</span><span class="w"> </span><span class="c1">// We can use platformName() to obtain the platform no.</span>
</span><span id="__span-48-3"><a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a><span class="hll"><span class="p">.</span><span class="nx">size</span><span class="p">(</span><span class="mf">9</span><span class="p">,</span><span class="w"> </span><span class="mf">9</span><span class="p">)</span>
</span></span><span id="__span-48-4"><a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a><span class="hll"><span class="p">.</span><span class="nx">scaleXY</span><span class="p">()</span>
</span></span><span id="__span-48-5"><a id="__codelineno-48-5" name="__codelineno-48-5" href="#__codelineno-48-5"></a><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="mf">84</span><span class="p">,</span><span class="w"> </span><span class="nx">rowY</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span>
</span><span id="__span-48-6"><a id="__codelineno-48-6" name="__codelineno-48-6" href="#__codelineno-48-6"></a><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="mf">0.9</span><span class="p">)</span>
</span><span id="__span-48-7"><a id="__codelineno-48-7" name="__codelineno-48-7" href="#__codelineno-48-7"></a><span class="p">.</span><span class="nx">centerAlign</span><span class="p">()</span>
</span><span id="__span-48-8"><a id="__codelineno-48-8" name="__codelineno-48-8" href="#__codelineno-48-8"></a><span class="p">.</span><span class="nx">color</span><span class="p">(</span><span class="mh">0xFFFFFF</span><span class="p">)</span>
</span><span id="__span-48-9"><a id="__codelineno-48-9" name="__codelineno-48-9" href="#__codelineno-48-9"></a><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span></code></pre></div>
<div class="language-js highlight"><span class="filename">pids_tut.js</span><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;ETA Text&quot;</span><span class="p">)</span>
</span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">TextUtil</span><span class="p">.</span><span class="nx">cycleString</span><span class="p">(</span><span class="nx">PIDSUtil</span><span class="p">.</span><span class="nx">getETAText</span><span class="p">(</span><span class="nx">arrival</span><span class="p">.</span><span class="nx">arrivalTime</span><span class="p">())))</span>
</span><span id="__span-49-3"><a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="mf">1.25</span><span class="p">)</span>
</span><span id="__span-49-4"><a id="__codelineno-49-4" name="__codelineno-49-4" href="#__codelineno-49-4"></a><span class="hll"><span class="p">.</span><span class="nx">size</span><span class="p">(</span><span class="mf">30</span><span class="p">,</span><span class="w"> </span><span class="mf">9</span><span class="p">)</span>
</span></span><span id="__span-49-5"><a id="__codelineno-49-5" name="__codelineno-49-5" href="#__codelineno-49-5"></a><span class="hll"><span class="p">.</span><span class="nx">scaleXY</span><span class="p">()</span>
</span></span><span id="__span-49-6"><a id="__codelineno-49-6" name="__codelineno-49-6" href="#__codelineno-49-6"></a><span class="p">.</span><span class="nx">rightAlign</span><span class="p">()</span>
</span><span id="__span-49-7"><a id="__codelineno-49-7" name="__codelineno-49-7" href="#__codelineno-49-7"></a><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="nx">pids</span><span class="p">.</span><span class="nx">width</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">8</span><span class="p">,</span><span class="w"> </span><span class="nx">rowY</span><span class="p">)</span>
</span><span id="__span-49-8"><a id="__codelineno-49-8" name="__codelineno-49-8" href="#__codelineno-49-8"></a><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span></code></pre></div>
<h2 id="v5-its-coming-together">v5: It's coming together<a class="headerlink" href="#v5-its-coming-together" title="Anchor link to this section for reference">#</a></h2>
<p>At this point if you are developing this PIDS Preset for your own use, you should have learned most of the basics, and you may start to modify the code to suit your need.</p>
<p>However if you are planning to publish a PIDS Preset for others to use, you have to also account for the variety of different configuration people uses. Most notably, each PIDS Block has it's own config, such as <strong>Custom Messages</strong>, <strong>Hide Arrivals</strong>, <strong>Hide Platform Number</strong> etc.</p>
<p>This section will go through how to take these configs into account as well.</p>
<h3 id="custom-message">Custom Message<a class="headerlink" href="#custom-message" title="Anchor link to this section for reference">#</a></h3>
<p>We can obtain the custom message of the n<sup>th</sup> row by using the function <code>pids.getCustomMessage(n)</code></p>
<p>If a custom message exists, it will return the custom message.</p>
<p>Otherwise, it will return an empty string (" ")</p>
<p>Therefore, we can check whether that row have custom messages, and draw them differently depending on the situation:</p>
<div class="language-js highlight"><span class="filename">pids_tut.js</span><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="c1">// ... code before</span>
</span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a><span class="kd">let</span><span class="w"> </span><span class="nx">rowY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">HEADER_HEIGHT</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="nx">i</span><span class="o">*</span><span class="mf">16.75</span><span class="p">);</span>
</span><span id="__span-50-3"><a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a><span class="hll"><span class="kd">let</span><span class="w"> </span><span class="nx">customMsg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">pids</span><span class="p">.</span><span class="nx">getCustomMessage</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
</span></span><span id="__span-50-4"><a id="__codelineno-50-4" name="__codelineno-50-4" href="#__codelineno-50-4"></a><span class="hll"><span class="k">if</span><span class="p">(</span><span class="nx">customMsg</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// Have custom message</span>
</span></span><span id="__span-50-5"><a id="__codelineno-50-5" name="__codelineno-50-5" href="#__codelineno-50-5"></a><span class="hll"><span class="w">    </span><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Custom Text&quot;</span><span class="p">)</span>
</span></span><span id="__span-50-6"><a id="__codelineno-50-6" name="__codelineno-50-6" href="#__codelineno-50-6"></a><span class="hll"><span class="w">    </span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">TextUtil</span><span class="p">.</span><span class="nx">cycleString</span><span class="p">(</span><span class="nx">customMsg</span><span class="p">))</span>
</span></span><span id="__span-50-7"><a id="__codelineno-50-7" name="__codelineno-50-7" href="#__codelineno-50-7"></a><span class="hll"><span class="w">    </span><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="mf">1.25</span><span class="p">)</span>
</span></span><span id="__span-50-8"><a id="__codelineno-50-8" name="__codelineno-50-8" href="#__codelineno-50-8"></a><span class="hll"><span class="w">    </span><span class="p">.</span><span class="nx">size</span><span class="p">(</span><span class="nx">pids</span><span class="p">.</span><span class="nx">width</span><span class="o">-</span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">9</span><span class="p">)</span><span class="w"> </span><span class="c1">// -10 to account for padding on both sides</span>
</span></span><span id="__span-50-9"><a id="__codelineno-50-9" name="__codelineno-50-9" href="#__codelineno-50-9"></a><span class="hll"><span class="w">    </span><span class="p">.</span><span class="nx">scaleXY</span><span class="p">()</span>
</span></span><span id="__span-50-10"><a id="__codelineno-50-10" name="__codelineno-50-10" href="#__codelineno-50-10"></a><span class="hll"><span class="w">    </span><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="nx">rowY</span><span class="p">)</span>
</span></span><span id="__span-50-11"><a id="__codelineno-50-11" name="__codelineno-50-11" href="#__codelineno-50-11"></a><span class="hll"><span class="w">    </span><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span></span><span id="__span-50-12"><a id="__codelineno-50-12" name="__codelineno-50-12" href="#__codelineno-50-12"></a><span class="hll"><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// No custom message, continue the rest of arrival row logic</span>
</span></span><span id="__span-50-13"><a id="__codelineno-50-13" name="__codelineno-50-13" href="#__codelineno-50-13"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">arrival</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">pids</span><span class="p">.</span><span class="nx">arrivals</span><span class="p">().</span><span class="nx">get</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
</span><span id="__span-50-14"><a id="__codelineno-50-14" name="__codelineno-50-14" href="#__codelineno-50-14"></a><span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="nx">arrival</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-50-15"><a id="__codelineno-50-15" name="__codelineno-50-15" href="#__codelineno-50-15"></a><span class="w">        </span><span class="nx">Texture</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;LRT Circle White&quot;</span><span class="p">)</span>
</span><span id="__span-50-16"><a id="__codelineno-50-16" name="__codelineno-50-16" href="#__codelineno-50-16"></a><span class="w">        </span><span class="c1">// ... code after</span>
</span></code></pre></div>
<h3 id="hide-platform-number">Hide Platform Number<a class="headerlink" href="#hide-platform-number" title="Anchor link to this section for reference">#</a></h3>
<p>The <code>isPlatformNumberHidden()</code> function in the <code>pids</code> parameter returns whether platform number should be shown or not.<br />
Therefore, we can wrap it inside an if statement, and only draw the platform number if it is not hidden.</p>
<div class="language-js highlight"><span class="filename">pids_tut.js</span><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a><span class="c1">// ... code before</span>
</span><span id="__span-51-2"><a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a><span class="hll"><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">pids</span><span class="p">.</span><span class="nx">isPlatformNumberHidden</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// If platform number is not hidden</span>
</span></span><span id="__span-51-3"><a id="__codelineno-51-3" name="__codelineno-51-3" href="#__codelineno-51-3"></a><span class="w">    </span><span class="nx">Texture</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Platform Circle&quot;</span><span class="p">)</span>
</span><span id="__span-51-4"><a id="__codelineno-51-4" name="__codelineno-51-4" href="#__codelineno-51-4"></a><span class="w">    </span><span class="p">.</span><span class="nx">texture</span><span class="p">(</span><span class="s2">&quot;jsblock:textures/block/pids/plat_circle.png&quot;</span><span class="p">)</span>
</span><span id="__span-51-5"><a id="__codelineno-51-5" name="__codelineno-51-5" href="#__codelineno-51-5"></a><span class="w">    </span><span class="c1">// ... code for drawing platform circle &amp; platform number text</span>
</span><span id="__span-51-6"><a id="__codelineno-51-6" name="__codelineno-51-6" href="#__codelineno-51-6"></a><span class="p">}</span>
</span><span id="__span-51-7"><a id="__codelineno-51-7" name="__codelineno-51-7" href="#__codelineno-51-7"></a><span class="c1">// ... code after</span>
</span></code></pre></div>
<h3 id="hide-arrival">Hide Arrival<a class="headerlink" href="#hide-arrival" title="Anchor link to this section for reference">#</a></h3>
<p>Finally, we can use the <code>pids.isRowHidden(n)</code> function to determine whether arrival is set to hidden for that row.<br />
Once again, we can wrap it in an <code>if</code> statement, and let's put it together with the arrival null check as well!</p>
<div class="language-js highlight"><span class="filename">pids_tut.js</span><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="c1">// ... code before</span>
</span><span id="__span-52-2"><a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a><span class="kd">let</span><span class="w"> </span><span class="nx">arrival</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">pids</span><span class="p">.</span><span class="nx">arrivals</span><span class="p">().</span><span class="nx">get</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
</span><span id="__span-52-3"><a id="__codelineno-52-3" name="__codelineno-52-3" href="#__codelineno-52-3"></a><span class="hll"><span class="k">if</span><span class="p">(</span><span class="nx">arrival</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="nx">pids</span><span class="p">.</span><span class="nx">isRowHidden</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// have arrival &amp; row not hidden</span>
</span></span><span id="__span-52-4"><a id="__codelineno-52-4" name="__codelineno-52-4" href="#__codelineno-52-4"></a><span class="w">    </span><span class="c1">// ... Our arrival rendering logic</span>
</span></code></pre></div>
<h2 id="conclusion">Conclusion<a class="headerlink" href="#conclusion" title="Anchor link to this section for reference">#</a></h2>
<p>Congratulations! You have just built your custom PIDS preset from scratch!</p>
<p>Here's the full code for your reference (May differ slightly, but logic should mostly be same):</p>
<div class="language-js highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">pids_tut.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-53-1">  1</a></span>
<span class="normal"><a href="#__codelineno-53-2">  2</a></span>
<span class="normal"><a href="#__codelineno-53-3">  3</a></span>
<span class="normal"><a href="#__codelineno-53-4">  4</a></span>
<span class="normal"><a href="#__codelineno-53-5">  5</a></span>
<span class="normal"><a href="#__codelineno-53-6">  6</a></span>
<span class="normal"><a href="#__codelineno-53-7">  7</a></span>
<span class="normal"><a href="#__codelineno-53-8">  8</a></span>
<span class="normal"><a href="#__codelineno-53-9">  9</a></span>
<span class="normal"><a href="#__codelineno-53-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-53-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-53-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-53-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-53-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-53-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-53-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-53-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-53-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-53-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-53-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-53-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-53-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-53-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-53-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-53-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-53-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-53-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-53-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-53-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-53-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-53-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-53-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-53-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-53-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-53-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-53-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-53-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-53-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-53-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-53-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-53-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-53-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-53-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-53-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-53-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-53-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-53-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-53-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-53-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-53-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-53-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-53-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-53-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-53-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-53-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-53-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-53-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-53-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-53-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-53-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-53-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-53-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-53-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-53-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-53-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-53-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-53-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-53-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-53-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-53-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-53-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-53-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-53-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-53-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-53-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-53-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-53-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-53-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-53-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-53-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-53-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-53-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-53-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-53-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-53-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-53-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-53-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-53-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-53-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-53-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-53-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-53-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-53-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-53-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-53-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-53-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-53-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-53-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-53-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-53-100">100</a></span>
<span class="normal"><a href="#__codelineno-53-101">101</a></span>
<span class="normal"><a href="#__codelineno-53-102">102</a></span>
<span class="normal"><a href="#__codelineno-53-103">103</a></span>
<span class="normal"><a href="#__codelineno-53-104">104</a></span>
<span class="normal"><a href="#__codelineno-53-105">105</a></span>
<span class="normal"><a href="#__codelineno-53-106">106</a></span>
<span class="normal"><a href="#__codelineno-53-107">107</a></span>
<span class="normal"><a href="#__codelineno-53-108">108</a></span>
<span class="normal"><a href="#__codelineno-53-109">109</a></span>
<span class="normal"><a href="#__codelineno-53-110">110</a></span>
<span class="normal"><a href="#__codelineno-53-111">111</a></span>
<span class="normal"><a href="#__codelineno-53-112">112</a></span>
<span class="normal"><a href="#__codelineno-53-113">113</a></span>
<span class="normal"><a href="#__codelineno-53-114">114</a></span>
<span class="normal"><a href="#__codelineno-53-115">115</a></span>
<span class="normal"><a href="#__codelineno-53-116">116</a></span>
<span class="normal"><a href="#__codelineno-53-117">117</a></span>
<span class="normal"><a href="#__codelineno-53-118">118</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1"></a><span class="nx">include</span><span class="p">(</span><span class="nx">Resources</span><span class="p">.</span><span class="nx">id</span><span class="p">(</span><span class="s2">&quot;jsblock:scripts/pids_util.js&quot;</span><span class="p">));</span><span class="w"> </span><span class="c1">// Built-in script shipped with JCM</span>
</span><span id="__span-53-2"><a id="__codelineno-53-2" name="__codelineno-53-2"></a><span class="kd">const</span><span class="w"> </span><span class="nx">HEADER_HEIGHT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">13</span><span class="p">;</span>
</span><span id="__span-53-3"><a id="__codelineno-53-3" name="__codelineno-53-3"></a>
</span><span id="__span-53-4"><a id="__codelineno-53-4" name="__codelineno-53-4"></a><span class="kd">function</span><span class="w"> </span><span class="nx">create</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">pids</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-53-5"><a id="__codelineno-53-5" name="__codelineno-53-5"></a><span class="w">    </span><span class="nx">print</span><span class="p">(</span><span class="s2">&quot;Hello World ^^&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">// Only for testing, can remove</span>
</span><span id="__span-53-6"><a id="__codelineno-53-6" name="__codelineno-53-6"></a><span class="p">}</span>
</span><span id="__span-53-7"><a id="__codelineno-53-7" name="__codelineno-53-7"></a>
</span><span id="__span-53-8"><a id="__codelineno-53-8" name="__codelineno-53-8"></a><span class="kd">function</span><span class="w"> </span><span class="nx">render</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">pids</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-53-9"><a id="__codelineno-53-9" name="__codelineno-53-9"></a><span class="w">    </span><span class="nx">Texture</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Background&quot;</span><span class="p">)</span>
</span><span id="__span-53-10"><a id="__codelineno-53-10" name="__codelineno-53-10"></a><span class="w">    </span><span class="p">.</span><span class="nx">texture</span><span class="p">(</span><span class="s2">&quot;jsblock:textures/block/pids/rv_default.png&quot;</span><span class="p">)</span>
</span><span id="__span-53-11"><a id="__codelineno-53-11" name="__codelineno-53-11"></a><span class="w">    </span><span class="p">.</span><span class="nx">size</span><span class="p">(</span><span class="nx">pids</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span><span class="w"> </span><span class="nx">pids</span><span class="p">.</span><span class="nx">height</span><span class="p">)</span>
</span><span id="__span-53-12"><a id="__codelineno-53-12" name="__codelineno-53-12"></a><span class="w">    </span><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span><span id="__span-53-13"><a id="__codelineno-53-13" name="__codelineno-53-13"></a>
</span><span id="__span-53-14"><a id="__codelineno-53-14" name="__codelineno-53-14"></a><span class="w">    </span><span class="c1">// Top Bar</span>
</span><span id="__span-53-15"><a id="__codelineno-53-15" name="__codelineno-53-15"></a><span class="w">    </span><span class="c1">// Draw weather icon</span>
</span><span id="__span-53-16"><a id="__codelineno-53-16" name="__codelineno-53-16"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">weatherImg</span><span class="p">;</span>
</span><span id="__span-53-17"><a id="__codelineno-53-17" name="__codelineno-53-17"></a><span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="nx">MinecraftClient</span><span class="p">.</span><span class="nx">worldIsThundering</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-53-18"><a id="__codelineno-53-18" name="__codelineno-53-18"></a><span class="w">        </span><span class="nx">weatherImg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;jsblock:textures/block/pids/weather_thunder.png&quot;</span><span class="p">;</span>
</span><span id="__span-53-19"><a id="__codelineno-53-19" name="__codelineno-53-19"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="nx">MinecraftClient</span><span class="p">.</span><span class="nx">worldIsRaining</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-53-20"><a id="__codelineno-53-20" name="__codelineno-53-20"></a><span class="w">        </span><span class="nx">weatherImg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;jsblock:textures/block/pids/weather_raining.png&quot;</span><span class="p">;</span>
</span><span id="__span-53-21"><a id="__codelineno-53-21" name="__codelineno-53-21"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-53-22"><a id="__codelineno-53-22" name="__codelineno-53-22"></a><span class="w">        </span><span class="nx">weatherImg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;jsblock:textures/block/pids/weather_sunny.png&quot;</span><span class="p">;</span>
</span><span id="__span-53-23"><a id="__codelineno-53-23" name="__codelineno-53-23"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-53-24"><a id="__codelineno-53-24" name="__codelineno-53-24"></a>
</span><span id="__span-53-25"><a id="__codelineno-53-25" name="__codelineno-53-25"></a><span class="w">    </span><span class="nx">Texture</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Weather Icon&quot;</span><span class="p">)</span>
</span><span id="__span-53-26"><a id="__codelineno-53-26" name="__codelineno-53-26"></a><span class="w">    </span><span class="p">.</span><span class="nx">texture</span><span class="p">(</span><span class="nx">weatherImg</span><span class="p">)</span>
</span><span id="__span-53-27"><a id="__codelineno-53-27" name="__codelineno-53-27"></a><span class="w">    </span><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span>
</span><span id="__span-53-28"><a id="__codelineno-53-28" name="__codelineno-53-28"></a><span class="w">    </span><span class="p">.</span><span class="nx">size</span><span class="p">(</span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">)</span>
</span><span id="__span-53-29"><a id="__codelineno-53-29" name="__codelineno-53-29"></a><span class="w">    </span><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span><span id="__span-53-30"><a id="__codelineno-53-30" name="__codelineno-53-30"></a>
</span><span id="__span-53-31"><a id="__codelineno-53-31" name="__codelineno-53-31"></a><span class="w">    </span><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Clock&quot;</span><span class="p">)</span>
</span><span id="__span-53-32"><a id="__codelineno-53-32" name="__codelineno-53-32"></a><span class="w">    </span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">PIDSUtil</span><span class="p">.</span><span class="nx">formatTime</span><span class="p">(</span><span class="nx">MinecraftClient</span><span class="p">.</span><span class="nx">worldDayTime</span><span class="p">(),</span><span class="w"> </span><span class="kc">true</span><span class="p">))</span>
</span><span id="__span-53-33"><a id="__codelineno-53-33" name="__codelineno-53-33"></a><span class="w">    </span><span class="p">.</span><span class="nx">color</span><span class="p">(</span><span class="mh">0xFFFFFF</span><span class="p">)</span>
</span><span id="__span-53-34"><a id="__codelineno-53-34" name="__codelineno-53-34"></a><span class="w">    </span><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="nx">pids</span><span class="p">.</span><span class="nx">width</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">)</span>
</span><span id="__span-53-35"><a id="__codelineno-53-35" name="__codelineno-53-35"></a><span class="w">    </span><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="mf">0.9</span><span class="p">)</span>
</span><span id="__span-53-36"><a id="__codelineno-53-36" name="__codelineno-53-36"></a><span class="w">    </span><span class="p">.</span><span class="nx">rightAlign</span><span class="p">()</span>
</span><span id="__span-53-37"><a id="__codelineno-53-37" name="__codelineno-53-37"></a><span class="w">    </span><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span><span id="__span-53-38"><a id="__codelineno-53-38" name="__codelineno-53-38"></a>
</span><span id="__span-53-39"><a id="__codelineno-53-39" name="__codelineno-53-39"></a><span class="w">    </span><span class="c1">// Arrivals</span>
</span><span id="__span-53-40"><a id="__codelineno-53-40" name="__codelineno-53-40"></a><span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">pids</span><span class="p">.</span><span class="nx">rows</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-53-41"><a id="__codelineno-53-41" name="__codelineno-53-41"></a><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">rowY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">HEADER_HEIGHT</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="nx">i</span><span class="o">*</span><span class="mf">16.75</span><span class="p">);</span>
</span><span id="__span-53-42"><a id="__codelineno-53-42" name="__codelineno-53-42"></a><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">customMsg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">pids</span><span class="p">.</span><span class="nx">getCustomMessage</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
</span><span id="__span-53-43"><a id="__codelineno-53-43" name="__codelineno-53-43"></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="nx">customMsg</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-53-44"><a id="__codelineno-53-44" name="__codelineno-53-44"></a><span class="w">            </span><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Custom Text&quot;</span><span class="p">)</span>
</span><span id="__span-53-45"><a id="__codelineno-53-45" name="__codelineno-53-45"></a><span class="w">            </span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">TextUtil</span><span class="p">.</span><span class="nx">cycleString</span><span class="p">(</span><span class="nx">customMsg</span><span class="p">))</span>
</span><span id="__span-53-46"><a id="__codelineno-53-46" name="__codelineno-53-46"></a><span class="w">            </span><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="mf">1.25</span><span class="p">)</span>
</span><span id="__span-53-47"><a id="__codelineno-53-47" name="__codelineno-53-47"></a><span class="w">            </span><span class="p">.</span><span class="nx">size</span><span class="p">(</span><span class="nx">pids</span><span class="p">.</span><span class="nx">width</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="mf">5</span><span class="o">*</span><span class="mf">2</span><span class="p">),</span><span class="w"> </span><span class="mf">9</span><span class="p">)</span>
</span><span id="__span-53-48"><a id="__codelineno-53-48" name="__codelineno-53-48"></a><span class="w">            </span><span class="p">.</span><span class="nx">scaleXY</span><span class="p">()</span>
</span><span id="__span-53-49"><a id="__codelineno-53-49" name="__codelineno-53-49"></a><span class="w">            </span><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="nx">rowY</span><span class="p">)</span>
</span><span id="__span-53-50"><a id="__codelineno-53-50" name="__codelineno-53-50"></a><span class="w">            </span><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span><span id="__span-53-51"><a id="__codelineno-53-51" name="__codelineno-53-51"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-53-52"><a id="__codelineno-53-52" name="__codelineno-53-52"></a><span class="w">            </span><span class="kd">let</span><span class="w"> </span><span class="nx">arrival</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">pids</span><span class="p">.</span><span class="nx">arrivals</span><span class="p">().</span><span class="nx">get</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
</span><span id="__span-53-53"><a id="__codelineno-53-53" name="__codelineno-53-53"></a><span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="nx">arrival</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="nx">pids</span><span class="p">.</span><span class="nx">isRowHidden</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-53-54"><a id="__codelineno-53-54" name="__codelineno-53-54"></a><span class="w">                </span><span class="nx">Texture</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;LRT Circle White&quot;</span><span class="p">)</span>
</span><span id="__span-53-55"><a id="__codelineno-53-55" name="__codelineno-53-55"></a><span class="w">                </span><span class="p">.</span><span class="nx">texture</span><span class="p">(</span><span class="s2">&quot;mtr:textures/block/white.png&quot;</span><span class="p">)</span>
</span><span id="__span-53-56"><a id="__codelineno-53-56" name="__codelineno-53-56"></a><span class="w">                </span><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="mf">7.5</span><span class="p">,</span><span class="w"> </span><span class="nx">rowY</span><span class="o">+</span><span class="mf">1.5</span><span class="p">)</span>
</span><span id="__span-53-57"><a id="__codelineno-53-57" name="__codelineno-53-57"></a><span class="w">                </span><span class="p">.</span><span class="nx">size</span><span class="p">(</span><span class="mf">18</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">)</span>
</span><span id="__span-53-58"><a id="__codelineno-53-58" name="__codelineno-53-58"></a><span class="w">                </span><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span><span id="__span-53-59"><a id="__codelineno-53-59" name="__codelineno-53-59"></a>
</span><span id="__span-53-60"><a id="__codelineno-53-60" name="__codelineno-53-60"></a><span class="w">                </span><span class="nx">Texture</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;LRT Circle Colored&quot;</span><span class="p">)</span>
</span><span id="__span-53-61"><a id="__codelineno-53-61" name="__codelineno-53-61"></a><span class="w">                </span><span class="p">.</span><span class="nx">texture</span><span class="p">(</span><span class="s2">&quot;jsblock:textures/lrr.png&quot;</span><span class="p">)</span>
</span><span id="__span-53-62"><a id="__codelineno-53-62" name="__codelineno-53-62"></a><span class="w">                </span><span class="p">.</span><span class="nx">color</span><span class="p">(</span><span class="nx">arrival</span><span class="p">.</span><span class="nx">routeColor</span><span class="p">())</span>
</span><span id="__span-53-63"><a id="__codelineno-53-63" name="__codelineno-53-63"></a><span class="w">                </span><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="nx">rowY</span><span class="p">)</span>
</span><span id="__span-53-64"><a id="__codelineno-53-64" name="__codelineno-53-64"></a><span class="w">                </span><span class="p">.</span><span class="nx">size</span><span class="p">(</span><span class="mf">23</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">)</span>
</span><span id="__span-53-65"><a id="__codelineno-53-65" name="__codelineno-53-65"></a><span class="w">                </span><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span><span id="__span-53-66"><a id="__codelineno-53-66" name="__codelineno-53-66"></a>
</span><span id="__span-53-67"><a id="__codelineno-53-67" name="__codelineno-53-67"></a><span class="w">                </span><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;LRT Number Text&quot;</span><span class="p">)</span>
</span><span id="__span-53-68"><a id="__codelineno-53-68" name="__codelineno-53-68"></a><span class="w">                </span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">arrival</span><span class="p">.</span><span class="nx">routeNumber</span><span class="p">())</span>
</span><span id="__span-53-69"><a id="__codelineno-53-69" name="__codelineno-53-69"></a><span class="w">                </span><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="mf">0.55</span><span class="p">)</span>
</span><span id="__span-53-70"><a id="__codelineno-53-70" name="__codelineno-53-70"></a><span class="w">                </span><span class="p">.</span><span class="nx">centerAlign</span><span class="p">()</span>
</span><span id="__span-53-71"><a id="__codelineno-53-71" name="__codelineno-53-71"></a><span class="w">                </span><span class="p">.</span><span class="nx">size</span><span class="p">(</span><span class="mf">26</span><span class="p">,</span><span class="w"> </span><span class="mf">9</span><span class="p">)</span>
</span><span id="__span-53-72"><a id="__codelineno-53-72" name="__codelineno-53-72"></a><span class="w">                </span><span class="p">.</span><span class="nx">scaleXY</span><span class="p">()</span>
</span><span id="__span-53-73"><a id="__codelineno-53-73" name="__codelineno-53-73"></a><span class="w">                </span><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="mf">16.5</span><span class="p">,</span><span class="w"> </span><span class="nx">rowY</span><span class="o">+</span><span class="mf">3</span><span class="p">)</span>
</span><span id="__span-53-74"><a id="__codelineno-53-74" name="__codelineno-53-74"></a><span class="w">                </span><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span><span id="__span-53-75"><a id="__codelineno-53-75" name="__codelineno-53-75"></a>
</span><span id="__span-53-76"><a id="__codelineno-53-76" name="__codelineno-53-76"></a><span class="w">                </span><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Arrival Destination&quot;</span><span class="p">)</span>
</span><span id="__span-53-77"><a id="__codelineno-53-77" name="__codelineno-53-77"></a><span class="w">                </span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">TextUtil</span><span class="p">.</span><span class="nx">cycleString</span><span class="p">(</span><span class="nx">arrival</span><span class="p">.</span><span class="nx">destination</span><span class="p">()))</span>
</span><span id="__span-53-78"><a id="__codelineno-53-78" name="__codelineno-53-78"></a><span class="w">                </span><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="mf">1.25</span><span class="p">)</span>
</span><span id="__span-53-79"><a id="__codelineno-53-79" name="__codelineno-53-79"></a><span class="w">                </span><span class="p">.</span><span class="nx">size</span><span class="p">(</span><span class="mf">36</span><span class="p">,</span><span class="w"> </span><span class="mf">9</span><span class="p">)</span>
</span><span id="__span-53-80"><a id="__codelineno-53-80" name="__codelineno-53-80"></a><span class="w">                </span><span class="p">.</span><span class="nx">scaleXY</span><span class="p">()</span>
</span><span id="__span-53-81"><a id="__codelineno-53-81" name="__codelineno-53-81"></a><span class="w">                </span><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="mf">30</span><span class="p">,</span><span class="w"> </span><span class="nx">rowY</span><span class="p">)</span>
</span><span id="__span-53-82"><a id="__codelineno-53-82" name="__codelineno-53-82"></a><span class="w">                </span><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span><span id="__span-53-83"><a id="__codelineno-53-83" name="__codelineno-53-83"></a>
</span><span id="__span-53-84"><a id="__codelineno-53-84" name="__codelineno-53-84"></a><span class="w">                </span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">pids</span><span class="p">.</span><span class="nx">isPlatformNumberHidden</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-53-85"><a id="__codelineno-53-85" name="__codelineno-53-85"></a><span class="w">                    </span><span class="nx">Texture</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Platform Circle&quot;</span><span class="p">)</span>
</span><span id="__span-53-86"><a id="__codelineno-53-86" name="__codelineno-53-86"></a><span class="w">                    </span><span class="p">.</span><span class="nx">texture</span><span class="p">(</span><span class="s2">&quot;jsblock:textures/block/pids/plat_circle.png&quot;</span><span class="p">)</span>
</span><span id="__span-53-87"><a id="__codelineno-53-87" name="__codelineno-53-87"></a><span class="w">                    </span><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="mf">79</span><span class="p">,</span><span class="w"> </span><span class="nx">rowY</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span>
</span><span id="__span-53-88"><a id="__codelineno-53-88" name="__codelineno-53-88"></a><span class="w">                    </span><span class="p">.</span><span class="nx">size</span><span class="p">(</span><span class="mf">10.5</span><span class="p">,</span><span class="w"> </span><span class="mf">10.5</span><span class="p">)</span>
</span><span id="__span-53-89"><a id="__codelineno-53-89" name="__codelineno-53-89"></a><span class="w">                    </span><span class="p">.</span><span class="nx">color</span><span class="p">(</span><span class="mh">0xD2A808</span><span class="p">)</span><span class="w"> </span><span class="c1">// Hong Kong LRT Network Color</span>
</span><span id="__span-53-90"><a id="__codelineno-53-90" name="__codelineno-53-90"></a><span class="w">                    </span><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span><span id="__span-53-91"><a id="__codelineno-53-91" name="__codelineno-53-91"></a>
</span><span id="__span-53-92"><a id="__codelineno-53-92" name="__codelineno-53-92"></a><span class="w">                    </span><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;Platform Circle Text&quot;</span><span class="p">)</span>
</span><span id="__span-53-93"><a id="__codelineno-53-93" name="__codelineno-53-93"></a><span class="w">                    </span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">arrival</span><span class="p">.</span><span class="nx">platformName</span><span class="p">())</span>
</span><span id="__span-53-94"><a id="__codelineno-53-94" name="__codelineno-53-94"></a><span class="w">                    </span><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="mf">84</span><span class="p">,</span><span class="w"> </span><span class="nx">rowY</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span>
</span><span id="__span-53-95"><a id="__codelineno-53-95" name="__codelineno-53-95"></a><span class="w">                    </span><span class="p">.</span><span class="nx">size</span><span class="p">(</span><span class="mf">9</span><span class="p">,</span><span class="w"> </span><span class="mf">9</span><span class="p">)</span>
</span><span id="__span-53-96"><a id="__codelineno-53-96" name="__codelineno-53-96"></a><span class="w">                    </span><span class="p">.</span><span class="nx">scaleXY</span><span class="p">()</span>
</span><span id="__span-53-97"><a id="__codelineno-53-97" name="__codelineno-53-97"></a><span class="w">                    </span><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="mf">0.9</span><span class="p">)</span>
</span><span id="__span-53-98"><a id="__codelineno-53-98" name="__codelineno-53-98"></a><span class="w">                    </span><span class="p">.</span><span class="nx">centerAlign</span><span class="p">()</span>
</span><span id="__span-53-99"><a id="__codelineno-53-99" name="__codelineno-53-99"></a><span class="w">                    </span><span class="p">.</span><span class="nx">color</span><span class="p">(</span><span class="mh">0xFFFFFF</span><span class="p">)</span>
</span><span id="__span-53-100"><a id="__codelineno-53-100" name="__codelineno-53-100"></a><span class="w">                    </span><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span><span id="__span-53-101"><a id="__codelineno-53-101" name="__codelineno-53-101"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-53-102"><a id="__codelineno-53-102" name="__codelineno-53-102"></a>
</span><span id="__span-53-103"><a id="__codelineno-53-103" name="__codelineno-53-103"></a><span class="w">                </span><span class="nx">Text</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;ETA Text&quot;</span><span class="p">)</span>
</span><span id="__span-53-104"><a id="__codelineno-53-104" name="__codelineno-53-104"></a><span class="w">                </span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">TextUtil</span><span class="p">.</span><span class="nx">cycleString</span><span class="p">(</span><span class="nx">PIDSUtil</span><span class="p">.</span><span class="nx">getETAText</span><span class="p">(</span><span class="nx">arrival</span><span class="p">.</span><span class="nx">arrivalTime</span><span class="p">())))</span>
</span><span id="__span-53-105"><a id="__codelineno-53-105" name="__codelineno-53-105"></a><span class="w">                </span><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="mf">1.25</span><span class="p">)</span>
</span><span id="__span-53-106"><a id="__codelineno-53-106" name="__codelineno-53-106"></a><span class="w">                </span><span class="p">.</span><span class="nx">size</span><span class="p">(</span><span class="mf">30</span><span class="p">,</span><span class="w"> </span><span class="mf">9</span><span class="p">)</span>
</span><span id="__span-53-107"><a id="__codelineno-53-107" name="__codelineno-53-107"></a><span class="w">                </span><span class="p">.</span><span class="nx">scaleXY</span><span class="p">()</span>
</span><span id="__span-53-108"><a id="__codelineno-53-108" name="__codelineno-53-108"></a><span class="w">                </span><span class="p">.</span><span class="nx">rightAlign</span><span class="p">()</span>
</span><span id="__span-53-109"><a id="__codelineno-53-109" name="__codelineno-53-109"></a><span class="w">                </span><span class="p">.</span><span class="nx">pos</span><span class="p">(</span><span class="nx">pids</span><span class="p">.</span><span class="nx">width</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">8</span><span class="p">,</span><span class="w"> </span><span class="nx">rowY</span><span class="p">)</span>
</span><span id="__span-53-110"><a id="__codelineno-53-110" name="__codelineno-53-110"></a><span class="w">                </span><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span><span id="__span-53-111"><a id="__codelineno-53-111" name="__codelineno-53-111"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-53-112"><a id="__codelineno-53-112" name="__codelineno-53-112"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-53-113"><a id="__codelineno-53-113" name="__codelineno-53-113"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-53-114"><a id="__codelineno-53-114" name="__codelineno-53-114"></a><span class="p">}</span>
</span><span id="__span-53-115"><a id="__codelineno-53-115" name="__codelineno-53-115"></a>
</span><span id="__span-53-116"><a id="__codelineno-53-116" name="__codelineno-53-116"></a><span class="kd">function</span><span class="w"> </span><span class="nx">dispose</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">pids</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-53-117"><a id="__codelineno-53-117" name="__codelineno-53-117"></a><span class="w">    </span><span class="nx">print</span><span class="p">(</span><span class="s2">&quot;Goodbye World ^^;&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// Only for testing, can remove</span>
</span><span id="__span-53-118"><a id="__codelineno-53-118" name="__codelineno-53-118"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<h2 id="what-to-do-next">What to do next<a class="headerlink" href="#what-to-do-next" title="Anchor link to this section for reference">#</a></h2>
<p>Now you can check out the <a href="../../../scripting/">Scripting Documentation</a> to see what other functions and information you can obtain.</p>
<h3 id="additional-challenges">Additional Challenges<a class="headerlink" href="#additional-challenges" title="Anchor link to this section for reference">#</a></h3>
<p>Some things are intentionally left-out in this tutorial, which can mostly be attributed to my laziness, but nevertheless they also serve as a great opportunity for a bonus challenge:</p>
<p>On multiple occasions we have used <strong>PIDSUtil</strong> to obtain for example ETA Text, formatting clock etc.</p>
<p>Now can you create your own function to replace the use of PIDSUtil?</p>
<h4 id="pidsutilgetetatextarrivalms">PIDSUtil.getETAText(arrivalMs)<a class="headerlink" href="#pidsutilgetetatextarrivalms" title="Anchor link to this section for reference">#</a></h4>
<details class="tips">
<summary>Tips</summary>
<ul>
<li>Check if arrival second is &lt;= 0, if so return an empty string.</li>
<li>If arrival second less than 60, return <code>&lt;etaSec&gt; 秒|&lt;etaSec&gt; sec</code>.</li>
<li>If arrival second less than 120, return <code>&lt;etaMin&gt; 分鐘|&lt;etaMin&gt; min</code>.</li>
<li>Otherwise, return <code>&lt;etaMin&gt; 分鐘|&lt;etaMin&gt; mins</code>.</li>
<li>Use <code>Math.floor</code> and <code>Math.ceil</code> to round down/up numbers.</li>
</ul>
</details>
<h4 id="pidsutilformattimemctime">PIDSUtil.formatTime(mcTime)<a class="headerlink" href="#pidsutilformattimemctime" title="Anchor link to this section for reference">#</a></h4>
<details class="tips">
<summary>Tips</summary>
<ul>
<li>Every in-game hour is <code>50</code> second in real life, or exactly <code>1000</code> ticks.</li>
<li>Minecraft Time is <code>0</code> at <code>06:00</code>, add <code>6000</code> ticks to the Minecraft time before doing calculations.</li>
<li>Convert a number to string with <code>.toString()</code> function.</li>
<li>Pad zero digits on a string with <code>.padStart(2, '0')</code>.</li>
</ul>
</details>
<h4 id="show-car-length-if-arrivals-have-mixed-car-length">Show car length if arrivals have mixed car length<a class="headerlink" href="#show-car-length-if-arrivals-have-mixed-car-length" title="Anchor link to this section for reference">#</a></h4>
<details class="tips">
<summary>Tips</summary>
<ul>
<li>Read the <a href="../../../scripting/pids/#pids-object-related">PIDS Scripting Documentation</a> to see whether there's a function to determine if arrivals have mixed car length.</li>
<li>Use <code>PIDSUtil.getCarText(carLength)</code> function to obtain the car text.</li>
<li>Append the car text to the ETA string with a <code>|</code> so that it cycles through both car-text and ETA-text!</li>
</ul>
</details>
<h2 id="ending">Ending<a class="headerlink" href="#ending" title="Anchor link to this section for reference">#</a></h2>
<p>This concludes the PIDS tutorial. If you have any question or feedback, please don't hesitate to send it either in the <strong>District of Joban</strong> discord server, in the JCM thread in the <strong>Minecraft Transit Railway</strong> server, or submit a github issue! See you by then~ ^-^</p>
<p>- LX</p>
<!-- *[JCM]: Joban Client Mod -->
<!-- *[PIDS]: Passenger Information Display System -->












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <!-- Original Material theme copyright start -->
<div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Built with ♥️ by LX86
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
<!-- Original Material theme copyright end -->

<style>
    .promo-msg {
        opacity: 0.5;
        margin-left:-5rem;
        font-size: 0.7rem
    }
    @media only screen and (max-width: 720px) {
        .promo-msg {
            margin-left: 0.7rem;
        }
    }
</style>


<div class="promo-msg" style="">
  <p>Brought to you by <a href="https://joban.org">The District of Joban</a></p>
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://joban.org/dc" target="_blank" rel="noopener" title="Join The District of Joban's Discord Server" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485 485 0 0 0 404.081 32.03a1.82 1.82 0 0 0-1.923.91 338 338 0 0 0-14.9 30.6 447.9 447.9 0 0 0-134.426 0 310 310 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.7 483.7 0 0 0-119.688 37.107 1.7 1.7 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.02 2.02 0 0 0 .765 1.375 487.7 487.7 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348 348 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321 321 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251 251 0 0 0 9.109-7.137 1.82 1.82 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.81 1.81 0 0 1 1.924.233 235 235 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.4 301.4 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391 391 0 0 0 30.014 48.815 1.86 1.86 0 0 0 2.063.7A486 486 0 0 0 610.7 405.729a1.88 1.88 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541M222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241m195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241"/></svg>
    </a>
  
    
    
    
    
    <a href="https://github.com/DistrictOfJoban" target="_blank" rel="noopener" title="The District of Joban GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.top", "navigation.tabs", "navigation.indexes", "content.code.copy", "content.code.annotate", "content.tooltips"], "search": "../../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"alias": true, "provider": "mike"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>